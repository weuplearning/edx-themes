(this["webpackJsonpnew-tma-dashboard"]=this["webpackJsonpnew-tma-dashboard"]||[]).push([[0],{209:function(e,t){},211:function(e,t){},224:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),c=a.n(l),o=a(6),s=a(54),i=a(141),u=a(16),m=a(49),d=a(3),p=a(142),f=a.n(p),b="FETCH_USER_ENROLLMENTS",g="FILTER_USERS_ENROLLMENTS_BY_COURSE",E="SET_DISPLAY_MODE",h="SET_LOADER",O="FILTER_USERS_BY_COHORT",y="UPDATE_STUDENT_ENROLLMENT",j="CHANGE_PAGE",v="UPDATE_STUDENT_COHORT",x="GET_SEARCHBAR_VALUE",C="SET_TABLE_TO_EMPTY",_="IS_TABLE_DISPLAYED",k="GET_ENROLL_FIELD_VALUE",w="FETCH_USER_PROFILE",S="SET_PROFILE_LOADER",T="FORMAT_ENROLL_FIELD_VALUE",M="GET_REGISTER_FIELDS_VALUE",N="GENERATE_GRADE_REPORT",I="UPDATE_TIME_STAMPS",F="UPDATE_CUSTOM_FIELDS",R="SAVE_CUSTOM_FIELDS",L="GENERATE_NEW_PASSWORD_LINK",P="SET_EMAIL_CONTENT",D="DELETE_EMAIL_CONTENT",A="IMPORT_USERS_FROM_CSV",U="SET_COHORT_FOR_USERS_IMPORT",B="FETCH_EMAILS_HISTORY",H="FETCH_TASKS_HISTORY",W="FETCH_COURSES_LIST",V="FETCH_COURSE_ENROLLMENTS",q="GET_COURSE_ENROLLMENTS_COUNT",Y="SET_TAB_INDEX",G="SET_NEW_NAVIGATION_VALUE",z="GET_DATA_FROM_UPLOADED_CSV",X="ENABLE_MANUAL_MODE",K="ENABLE_UPLOAD_MODE",J="CHANGE_MODE_FOR_GRADE_REPORT",Z="SET_QUICKESEARCH_FIELD_VALUE",$="OPEN_MODAL",Q="CLOSE_MODAL",ee="SET_SCOPE_STATUS",te="OPEN_TIME_TRACKING_MODAL",ae="CLOSE_TIME_TRACKING_MODAL",ne="UPDATE_USER_TIME_TRACKING",re="GET_SECONDS_TO_ADD_BY_HOURS",le="GET_SECONDS_TO_ADD_BY_MINUTES",ce="UPDATE_IMPORT_TABLE",oe="SET_CONVERTER_COURSE_TITLE",se="SET_DEGREE_OF_CERTAINTY",ie="DISPLAY_TARFILE_LINK",ue="DISPLAY_SPINNER",me={enrollments:{},courses:{},selectedEnrollments:{},displayGlobalMode:!0,isLoading:!0,selectedCohorts:{},selectedCourse:"",loadedCourses:[],cohort:{},userDataId:0,page:0,tab:0,searchValue:"",searchBarResult:{},activeSuggestion:0,showSuggestions:!0,isTableOpened:!1,enrollFieldValue:"",enrollFieldArray:[],registerFieldsValue:[],importUsersSuccess:!1,selectedCohortForImport:{},emailContent:{cohortsRecipients:[],recipients:[],subject:"",message:""},emailsHistory:[],tasksHistory:[],historySuccess:!0,gradeReportWithAdmins:[],internBoxChecked:!0,messageModalOpen:!1,scope:{intern:!0,admin:!1}},de=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case q:return Object(d.a)(Object(d.a)({},t),{},{isSmallApp:a.payload});case W:return Object(d.a)(Object(d.a)({},t),{},{searchValue:"",courses:Object(d.a)(Object(d.a)({},t.courses),a.payload.org_courses),isLoading:!1});case V:return Object(d.a)(Object(d.a)({},t),{},{searchValue:"",enrollments:Object(d.a)({},a.payload.enrollments),selectedEnrollments:Object(d.a)({},a.payload.selectedEnrollments),loadedCourses:[].concat(Object(m.a)(t.loadedCourses),[a.payload.courseId]),isLoading:!1,cohort:{}});case b:return Object(d.a)(Object(d.a)({},t),{},{searchValue:"",enrollments:Object(d.a)(Object(d.a)({},t.enrollments),a.payload.user_enrollments_profiles),courses:Object(d.a)(Object(d.a)({},t.courses),a.payload.org_courses),isLoading:!1,cohort:{}});case g:return Object(d.a)(Object(d.a)({},t),{},{searchValue:"",selectedEnrollments:Object(d.a)({},a.payload.enrollments),selectedCourse:a.payload.courseId,displayGlobalMode:!1,cohort:{},page:0,tab:0,showSuggestions:!0,isTableOpened:!1,enrollFieldValue:"",importUsersSuccess:!1,emailsHistory:[],tasksHistory:[]});case E:return a.payload?Object(d.a)(Object(d.a)({},t),{},{searchValue:"",displayGlobalMode:a.payload,selectedEnrollments:{},cohort:{},page:0,tab:0,selectedCourse:"",showSuggestions:!0,isTableOpened:!1}):Object(d.a)(Object(d.a)({},t),{},{displayGlobalMode:a.payload,cohort:{},page:0});case h:return Object(d.a)(Object(d.a)({},t),{},{isLoading:a.payload});case Y:return Object(d.a)(Object(d.a)({},t),{},{tab:a.payload});case O:return Object(d.a)(Object(d.a)({},t),{},{selectedCohorts:Object(d.a)({},a.payload.filteredCohorts),cohort:Object(d.a)({},a.payload.cohort),page:0});case j:return Object(d.a)(Object(d.a)({},t),{},{page:a.payload});case y:var n="enrollments";return t.selectedCourse?n="selectedEnrollments":Object.keys(t.cohort).length&&(n="selectedCohorts"),Object(d.a)(Object(d.a)({},t),{},Object(u.a)({},n,Object(d.a)(Object(d.a)({},t[n]),{},Object(u.a)({},a.payload.user.id,Object(d.a)(Object(d.a)({},t[n][a.payload.user.id]),{},{enrollments:Object(d.a)(Object(d.a)({},t[n][a.payload.user.id].enrollments),{},Object(u.a)({},a.payload.courseId,Object(d.a)(Object(d.a)({},t[n][a.payload.user.id].enrollments[a.payload.courseId]),{},{is_active:"enroll"===a.payload.action})))})))));case v:var r="selectedEnrollments";return Object.keys(t.cohort).length&&(r="selectedCohorts"),Object(d.a)(Object(d.a)({},t),{},(e={userDataId:a.payload.userDataId},Object(u.a)(e,r,Object(d.a)(Object(d.a)({},t[r]),{},Object(u.a)({},a.payload.userDataId,Object(d.a)(Object(d.a)({},t[r][a.payload.userDataId]),{},{enrollments:Object(d.a)(Object(d.a)({},t[r][a.payload.userDataId].enrollments),{},Object(u.a)({},t.selectedCourse,Object(d.a)(Object(d.a)({},t[r][a.payload.userDataId].enrollments[t.selectedCourse]),{},{cohort:Object(d.a)({},a.payload.cohort)})))})))),Object(u.a)(e,"selectedEnrollments",Object(d.a)(Object(d.a)({},t.selectedEnrollments),{},Object(u.a)({},a.payload.userDataId,Object(d.a)(Object(d.a)({},t.selectedEnrollments[a.payload.userDataId]),{},{enrollments:Object(d.a)(Object(d.a)({},t.selectedEnrollments[a.payload.userDataId].enrollments),{},Object(u.a)({},t.selectedCourse,Object(d.a)(Object(d.a)({},t.selectedEnrollments[a.payload.userDataId].enrollments[t.selectedCourse]),{},{cohort:Object(d.a)({},a.payload.cohort)})))})))),e));case x:return Object(d.a)(Object(d.a)({},t),{},{searchValue:a.payload.searchValue,searchBarResult:Object(d.a)({},a.payload.searchResult),activeSuggestion:a.payload.activeSuggestion});case C:return Object(d.a)(Object(d.a)({},t),{},{showSuggestions:a.payload});case _:return Object(d.a)(Object(d.a)({},t),{},{isTableOpened:!0});case k:return Object(d.a)(Object(d.a)({},t),{},{enrollFieldValue:a.payload.inputValue});case T:return Object(d.a)(Object(d.a)({},t),{},{enrollFieldArray:Object(d.a)({},a.payload.formatedValue)});case z:return Object(d.a)(Object(d.a)({},t),{},{enrollFieldArray:Object(d.a)({},a.payload)});case M:return Object(d.a)(Object(d.a)({},t),{},{registerFieldsValue:Object(d.a)({},a.payload),importUsersSuccess:!1});case A:return Object(d.a)(Object(d.a)({},t),{},{isTableOpened:!1,enrollFieldArray:[],importUsersSuccess:!0});case X:return Object(d.a)(Object(d.a)({},t),{},{importManualMode:!0,importUploadMode:!1});case K:return Object(d.a)(Object(d.a)({},t),{},{importUploadMode:!0,importManualMode:!1});case U:return Object(d.a)(Object(d.a)({},t),{},{selectedCohortForImport:Object(d.a)({},a.payload)});case P:return Object(d.a)(Object(d.a)({},t),{},{emailContent:Object(d.a)(Object(d.a)({},t.emailContent),{},Object(u.a)({},a.payload.name,a.payload.value))});case D:return Object(d.a)(Object(d.a)({},t),{},{emailContent:a.payload});case B:return Object(d.a)(Object(d.a)({},t),{},{emailsHistory:Object(m.a)(a.payload.data),historySuccess:a.payload.historySuccess});case H:return Object(d.a)(Object(d.a)({},t),{},{tasksHistory:Object(m.a)(a.payload.data),historySuccess:a.payload.historySuccess});case J:return Object(d.a)(Object(d.a)({},t),{},{internBoxChecked:a.payload});case N:return Object(d.a)(Object(d.a)({},t),{},{generatedGradeReportMessage:a.payload.sendGradeReportMessage});case $:return Object(d.a)(Object(d.a)({},t),{},{messageModalOpen:!0});case Q:return Object(d.a)(Object(d.a)({},t),{},{messageModalOpen:!1,generatedGradeReportMessage:"",generatedGradeReceiver:""});case ee:return Object(d.a)(Object(d.a)({},t),{},{scope:a.payload});case ce:return f()(t,{enrollFieldArray:{data:Object(u.a)({},a.payload.indexRow,Object(u.a)({},a.payload.indexWrongData,{$set:a.payload.dataToReplace}))}});default:return t}},pe={userProfile:{},customFields:{},loadingProfile:!1,searchMade:!1,snackSettings:{},customFieldSaveOn:!1,passwordLink:"",userMail:"",timeTrackingModalOpen:!1,timeTrackingUser:"",secondsToaddToUserCourseByHours:0,secondsToaddToUserCourseByMinutes:0},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(d.a)(Object(d.a)({},e),{},{userProfile:t.payload,searchMade:!0,loadingProfile:!1,passwordLink:""});case S:return Object(d.a)(Object(d.a)({},e),{},{userProfile:{},searchMade:!1,loadingProfile:!0});case I:return Object(d.a)(Object(d.a)({},e),{},{userProfile:Object(d.a)(Object(d.a)({},e.userProfile),{},{custom_field:Object(d.a)(Object(d.a)({},e.userProfile.custom_field),{},Object(u.a)({},t.payload.courseId,t.payload.date))}),customFieldSaveOn:!0});case F:var a=t.payload,n=a.config,r=a.name,l=a.value;return Object(d.a)(Object(d.a)({},e),{},{userProfile:Object(d.a)(Object(d.a)({},e.userProfile),{},Object(u.a)({},n,Object(d.a)(Object(d.a)({},e.userProfile[n]),{},Object(u.a)({},r,l)))),customFieldSaveOn:!0});case R:return Object(d.a)(Object(d.a)({},e),{},{snackSettings:t.payload.snackSettings,customFieldSaveOn:!1});case L:return Object(d.a)(Object(d.a)({},e),{},{passwordLink:t.payload});case Z:return Object(d.a)(Object(d.a)({},e),{},{userMail:t.payload});case te:return Object(d.a)(Object(d.a)({},e),{},{timeTrackingModalOpen:!0,timeTrackingUser:t.payload});case ae:return Object(d.a)(Object(d.a)({},e),{},{timeTrackingModalOpen:!1});case ne:var c=t.payload,o=c.courseId,s=c.secondsToAdd;return Object(d.a)(Object(d.a)({},e),{},{userProfile:Object(d.a)(Object(d.a)({},e.userProfile),{},{enrollments:Object(d.a)(Object(d.a)({},e.userProfile.enrollments),{},Object(u.a)({},o,Object(d.a)(Object(d.a)({},e.userProfile.enrollments[o]),{},{time_tracking:e.userProfile.enrollments[o].time_tracking.split(":").reduce((function(e,t){return 60*e+ +t}))+s})))}),timeTrackingModalOpen:!1,secondsToaddToUserCourseByHours:0,secondsToaddToUserCourseByMinutes:0});case re:return Object(d.a)(Object(d.a)({},e),{},{secondsToaddToUserCourseByHours:t.payload});case le:return Object(d.a)(Object(d.a)({},e),{},{secondsToaddToUserCourseByMinutes:t.payload});default:return e}},be={values:window.props.translations},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;return t.type,e},Ee={navValue:1},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(d.a)(Object(d.a)({},e),{},{navValue:t.payload});default:return e}},Oe={values:window.props.dashboard_config},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;return t.type,e},je={courseTitle:"",degreeOfCert:!1,displayTarfileLink:!1,displaySpinner:!1,displayErrorMessage:!1},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(d.a)(Object(d.a)({},e),{},{courseTitle:t.payload});case se:return Object(d.a)(Object(d.a)({},e),{},{degreeOfCert:t.payload});case ue:return Object(d.a)(Object(d.a)({},e),{},{displaySpinner:t.payload.displaySpinner,displayErrorMessage:!1,displayTarfileLink:!1});case ie:return Object(d.a)(Object(d.a)({},e),{},{displaySpinner:!1,displayErrorMessage:t.payload.displayErrorMessage,displayTarfileLink:t.payload.displayTarfileLink});default:return e}},xe=Object(s.c)({userManagement:de,quickSearch:fe,translations:ge,navigation:he,configuration:ye,openedXConverter:ve}),Ce=a(264),_e=a(295),ke=a(261),we=a(168),Se=Object(we.a)({palette:{primary:{main:window.props.colors.primary_color},secondary:{main:window.props.colors.secondary_color},background:{main:"#E5E5E5",clear:"#FFFFFF"},error:{main:window.props.colors.error}},text:{font:{main:"Montserrat"}},scrollBar:{"*::-webkit-scrollbar":{width:"25px"}},overrides:{MuiCssBaseline:{"@global":{"*::-webkit-scrollbar":{width:"8px",height:"8px",backgroundColor:"#F5F5F5"},"*::-webkit-scrollbar-thumb":{borderRadius:"10px",backgroundColor:"#8D8181"},"*::-webkit-scrollbar-track":{borderRadius:"10px",backgroundColor:"#F5F5F5"}}}}}),Te=a(170),Me=function(e){var t=e.children,a=e.value,n=e.index,l=Object(Te.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},l),a===n&&r.a.createElement(ke.a,null,t))},Ne=a(280),Ie=a(227),Fe=a(228),Re=a(63),Le=a(272),Pe=a(101),De=a.n(Pe),Ae=a(273),Ue=a(266),Be=a(270),He=a(269),We=a(265),Ve=a(267),qe=a(268),Ye=a(116),Ge=a(298),ze=a(20),Xe=a.n(ze),Ke=(a(77),Object(Ce.a)({table:{minWidth:650}})),Je=function(){var e=Ke(),t=Object(o.c)((function(e){return{userProfile:e.quickSearch.userProfile,trad:e.translations.values}})),a=t.userProfile,n=t.trad,l=Xe()(a.last_login).format("lll").replace("-",""),c=Xe()(a.inscription).format("lll").replace("-",""),s=0;return Object.values(a.enrollments).forEach((function(e){e.enrolled_to_enrollment&&s++})),r.a.createElement(We.a,{component:Ye.a},r.a.createElement(Ue.a,{className:e.table,"aria-label":"simple table"},r.a.createElement(Ve.a,null,r.a.createElement(qe.a,null,r.a.createElement(He.a,{align:"center"},r.a.createElement(Ge.a,{fontWeight:700},n.status)),r.a.createElement(He.a,{align:"center"},r.a.createElement(Ge.a,{fontWeight:700},n.last_name)),r.a.createElement(He.a,{align:"center"},r.a.createElement(Ge.a,{fontWeight:700},n.first_name)),r.a.createElement(He.a,{align:"center"},r.a.createElement(Ge.a,{fontWeight:700},n.username)),r.a.createElement(He.a,{align:"center"},r.a.createElement(Ge.a,{fontWeight:700},n.last_login)),r.a.createElement(He.a,{align:"center"},r.a.createElement(Ge.a,{fontWeight:700},n.created)),r.a.createElement(He.a,{align:"center"},r.a.createElement(Ge.a,{fontWeight:700},n.total_course_enrollment)))),r.a.createElement(Be.a,null,r.a.createElement(qe.a,null,r.a.createElement(He.a,{align:"center"},a.active?n.active:n.inactive),r.a.createElement(He.a,{align:"left"},a.last_name),r.a.createElement(He.a,{align:"left"},a.first_name),r.a.createElement(He.a,{align:"center"},a.username),r.a.createElement(He.a,{align:"center"},l),r.a.createElement(He.a,{align:"center"},c),r.a.createElement(He.a,{align:"center"},s)))))},Ze=a(11),$e=a(271),Qe=a(274),et=a(275),tt=a(276),at=a(278),nt=a(146),rt=a.n(nt),lt=a(8),ct=a.n(lt),ot=a(17),st=function(e){return function(){var t=Object(ot.a)(ct.a.mark((function t(a,n){var r,l,c,o,s,i,m,p;return ct.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n(),l=r.userManagement,c=Object(d.a)({},l.enrollments),o=Object(d.a)({},l.selectedEnrollments),s={},i=window.props.endpoints.fetchCourseEnrollments.replace("<courseId>",e),m={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},t.next=9,fetch(i,m);case 9:return p=t.sent,t.next=12,p.json();case 12:s=t.sent,t.next=16;break;case 15:s=window.props;case 16:Object.entries(s.user_enrollments_profiles).forEach((function(t){t[0]in c?c[t[0]].enrollments=Object(d.a)(Object(d.a)({},c[t[0]].enrollments),t[1].enrollments):c[t[0]]=t[1],e in t[1].enrollments&&(t[0]in o||(o[t[0]]=Object(d.a)({},t[1])),t[0]in o&&(o[t[0]].enrollments=Object(d.a)(Object(d.a)({},o[t[0]].enrollments),Object(u.a)({},e,t[1].enrollments[e]))))})),a({type:V,payload:{courseId:e,enrollments:c,selectedEnrollments:o}});case 19:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},it=function(e,t){var a={};return t&&Object.entries(e).forEach((function(e){e[1].enrollments.hasOwnProperty(t)&&(a.hasOwnProperty(e[0])||(a[e[0]]=Object(d.a)({},e[1]),a[e[0]].enrollments={}),a.hasOwnProperty(e[0])&&e[1].enrollments.hasOwnProperty(t)&&(a[e[0]].enrollments=Object(d.a)(Object(d.a)({},a[e[0]].enrollments),Object(u.a)({},t,e[1].enrollments[t]))))})),{type:g,payload:{enrollments:a,courseId:t}}},ut=function(e){return{type:h,payload:e}},mt=function(e,t,a,n,r){return function(){var l=Object(ot.a)(ct.a.mark((function l(c){var o,s,i,u,m,d,p,f,b,g;return ct.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:for(u in e.stopPropagation(),o={},{},s={action:t,identifiers:n.email,email_students:a,auto_enroll:!0,role:"Learner",reason:""},i=[],s)m=encodeURIComponent(u),d=encodeURIComponent(s[u]),i.push(m+"="+d);return i=i.join("&"),p=window.props.endpoints.updateStudentEnrollment.replace("<courseId>",r),f={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken,Accept:"application/json, text/javascript, */*; q=0.01","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},processData:!1,body:i},l.next=12,fetch(p,f);case 12:return b=l.sent,l.next=15,b.json();case 15:o=l.sent,(g=o.results[0]).before!==g.after&&c({type:y,payload:{user:n,courseId:r,action:t}}),l.next=23;break;case 20:o="local response",c({type:y,payload:{user:n,courseId:r,action:t}});case 23:case"end":return l.stop()}}),l)})));return function(e){return l.apply(this,arguments)}}()},dt=function(e){return{type:j,payload:e}},pt=function(){return{type:_}},ft=function(e){return{type:T,payload:{formatedValue:e}}},bt=function(e){return function(){var t=Object(ot.a)(ct.a.mark((function t(a){var n,r,l,c,o;return ct.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},r={},a({type:S,payload:!0}),l=window.props.endpoints.fetchUserProfile.replace("<userEmail>",e),c={method:"GET",headers:{"X-CSRFToken":window.props.csrfToken},contentType:!1,processData:!1},t.next=8,fetch(l,c);case 8:return o=t.sent,t.next=11,o.json();case 11:n=t.sent,a({type:w,payload:r=n}),t.next=17;break;case 16:setTimeout((function(){for(var t=Object.keys(window.props.user_enrollments_profiles),n=0;n<t.length;n++)if(window.props.user_enrollments_profiles[t[n]].email===e){r=window.props.user_enrollments_profiles[t[n]];break}a({type:w,payload:r})}),1e3);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},gt=function(){return function(){var e=Object(ot.a)(ct.a.mark((function e(t){var a,n,r,l;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n=window.props.endpoints.getRegisterFieldsValue,r={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},e.next=6,fetch(n,r);case 6:return l=e.sent,e.next=9,l.json();case 9:a=e.sent,e.next=13;break;case 12:a=window.props.register_fields;case 13:t({type:M,payload:a});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Et=function(e,t,a){return{type:F,payload:{name:e,config:t,value:a}}},ht=function(e){return function(){var t=Object(ot.a)(ct.a.mark((function t(a){var n,r,l,c;return ct.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.props.endpoints.unlockUserAccount,r={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken},contentType:!1,processData:!1,body:e},t.next=4,fetch(n,r);case 4:return l=t.sent,t.next=7,l.json();case 7:c=t.sent,200===l.status&&a({type:"UNLOCK_USER_ACCOUNT",payload:c});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ot=function(e,t){return{type:P,payload:{name:e,value:t}}},yt=function(e,t,a){return function(){var n=Object(ot.a)(ct.a.mark((function n(r){var l,c,o,s,i,u,m,d;return ct.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o in l={rows:JSON.stringify(e),cohort:JSON.stringify(a)},c=[],l)s=encodeURIComponent(o),i=encodeURIComponent(l[o]),c.push(s+"="+i);return c=c.join("&"),u=window.props.endpoints.importUsersFromCSV.replace("<courseId>",t),m={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken,Accept:"application/json, text/javascript, */*; q=0.01","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},processData:!1,body:c},n.next=9,fetch(u,m);case 9:return d=n.sent,n.next=12,d.json();case 12:n.sent;case 13:r({type:A,payload:{courseId:t,importedUsers:e}});case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},jt=function(e){return{type:G,payload:e}},vt=function(e){return{type:Z,payload:e}},xt=function(e){return{type:ce,payload:e}},Ct=Object(Ce.a)((function(e){return{button:{margin:e.spacing(1)},spinner:{textAlign:"center",margin:"auto",marginBottom:20},dialogAction:{minHeight:"45px"}}})),_t=function(){var e=Ct(),t=Object(o.b)(),a=Object(n.useState)(!1),l=Object(Ze.a)(a,2),c=l[0],s=l[1],i=Object(n.useState)(!1),u=Object(Ze.a)(i,2),m=u[0],d=u[1],p=Object(o.c)((function(e){return{org:e.quickSearch.userProfile.org,email:e.quickSearch.userProfile.email,passwordLink:e.quickSearch.passwordLink,trad:e.translations.values}})),f=p.org,b=p.email,g=p.passwordLink,E=p.trad,h=Object(n.useCallback)((function(){s(!c)}),[c]),O=Object(n.useCallback)((function(){d(!0),t(function(e){return function(){var t=Object(ot.a)(ct.a.mark((function t(a){var n,r,l,c;return ct.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.props.endpoints.generateNewPasswordLink,r={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken},contentType:!1,processData:!1,body:e},t.next=4,fetch(n,r);case 4:return l=t.sent,t.next=7,l.json();case 7:c=t.sent,200===l.status&&a({type:L,payload:c.link});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(b))}),[t,b]);Object(n.useEffect)((function(){g&&d(!1)}),[g]);var y=Object(n.useCallback)((function(){return m?r.a.createElement($e.a,{className:e.dialogAction},r.a.createElement(ke.a,{className:e.spinner},r.a.createElement(Le.a,{thickness:2,size:40}))):g?r.a.createElement($e.a,{className:e.dialogAction},r.a.createElement(Ae.a,{onClick:h,color:"primary",autoFocus:!0},"OK")):r.a.createElement($e.a,{className:e.dialogAction},r.a.createElement(Ae.a,{onClick:function(){return O()},color:"primary"},E.generate),r.a.createElement(Ae.a,{onClick:h,color:"primary",autoFocus:!0},E.cancel))}),[e.dialogAction,e.spinner,O,m,g,h,E]),j="https://"+f+"/"+g;console.log(j);var v=Object(n.useCallback)((function(){return g?r.a.createElement(Qe.a,null,r.a.createElement(et.a,null,r.a.createElement("p",null,E.reset_link_password,r.a.createElement("br",null),j))):r.a.createElement(Qe.a,null,r.a.createElement(et.a,null,E.generate_a_link))}),[j,g,E]),x=Object(n.useCallback)((function(){return r.a.createElement(tt.a,{open:c,onClose:h},r.a.createElement(at.a,null,E.reset_password),v(),y())}),[c,y,v,h,E]),C=Object(n.useCallback)((function(){return r.a.createElement(ke.a,{style:{textAlign:"center"}},r.a.createElement(Ae.a,{variant:"contained",color:"primary",className:e.button,startIcon:r.a.createElement(rt.a,null),onClick:h},E.reset_password))}),[e.button,h,E]);return r.a.createElement(r.a.Fragment,null,C(),x())},kt=a(147),wt=a.n(kt),St=Object(Ce.a)((function(e){return{button:{margin:e.spacing(1)},dialogBottom:{display:"flex",alignContent:"center",justifyContent:"center",width:"100%",height:50,marginBottom:20}}}));function Tt(){var e=St(),t=Object(n.useState)(!1),a=Object(Ze.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(Ze.a)(s,2),u=i[0],m=i[1],d=Object(o.c)((function(e){return{userProfile:e.quickSearch.userProfile,email:e.quickSearch.userProfile.email,trad:e.translations.values}})),p=d.userProfile,f=d.email,b=d.trad,g=Object(n.useCallback)((function(){c(!l)}),[l]),E=Object(o.b)(),h=Object(n.useCallback)(Object(ot.a)(ct.a.mark((function e(){return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,E(ht(f));case 3:g(),m(!1);case 5:case"end":return e.stop()}}),e)}))),[E,f,g]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{style:{textAlign:"center"}},r.a.createElement(Ae.a,{disabled:p.is_locked,variant:"contained",color:"primary",className:e.button,startIcon:r.a.createElement(wt.a,null),onClick:g},b.unlock_account)),r.a.createElement(tt.a,{open:l},r.a.createElement(at.a,null,b.unlock_account),r.a.createElement(Qe.a,null,r.a.createElement(et.a,{id:"alert-dialog-description"},b.unlock_account_question)),r.a.createElement($e.a,{className:e.dialogBottom},u?r.a.createElement(Le.a,{thickness:2,size:50}):r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{container:!0,justify:"flex-end"},r.a.createElement(Ae.a,{onClick:h,color:"primary"},b.yes),r.a.createElement(Ae.a,{onClick:g,color:"primary",autoFocus:!0},b.no))))))}var Mt=a(281),Nt=a(282),It=a(279),Ft=a(148),Rt=a.n(Ft),Lt=a(150),Pt=a.n(Lt),Dt=a(149),At=a.n(Dt),Ut=a(151),Bt=a.n(Ut),Ht="40px",Wt=Object(Ce.a)((function(e){return{root:{display:"flex",padding:20},details:{display:"flex",flexDirection:"column",width:"100%"},content:{flex:"1 0 auto"},cover:{width:151},controls:{display:"flex",alignItems:"center",paddingLeft:e.spacing(1),paddingBottom:e.spacing(1)},playIcon:{height:38,width:38},greenSquare:{backgroundColor:"#27ad60",height:Ht,width:Ht,borderRadius:"10%"},yellowSquare:{backgroundColor:"#f2984a",height:Ht,width:Ht,borderRadius:"10%"},redSquare:{backgroundColor:"#ec5756",height:Ht,width:Ht,borderRadius:"10%"},completionIcon:{margin:"8px"},courseList:{height:"300px",overflowY:"scroll"},courses_text:{width:"100%"},pointer:{cursor:"pointer"}}})),Vt=function(){var e=Wt(),t=Object(o.b)(),a=Object(o.c)((function(e){return{userProfile:e.quickSearch.userProfile,trad:e.translations.values,enrollments:e.userManagement.enrollments,configuration:e.configuration.values}})),l=a.userProfile,c=a.trad,s=a.enrollments,i=a.configuration,u=Object(n.useState)(0),m=Object(Ze.a)(u,2),d=m[0],p=m[1],f=!0,b=[];i&&i.HIDE_NOT_ENROLLED_COURSES_IN_QUICKSEARCH&&(f=!1);var g=Object.values(l.enrollments).filter((function(e){return e.enrolled_to_enrollment&&!e.passed}));g.map((function(e){return b.push(e.id)}));var E=Object.values(l.enrollments).filter((function(e){return e.passed}));(E.map((function(e){return b.push(e.id)})),f)&&Object.values(l.enrollments).filter((function(e){return!e.enrolled_to_enrollment})).map((function(e){return b.push(e.id)}));var h=function(a){var n,o,i=l.enrollments[a];return i.passed?(n=r.a.createElement("div",{className:e.greenSquare},r.a.createElement(Rt.a,{htmlColor:"white",className:e.completionIcon})),o=c.passed):i.start_date?(n=r.a.createElement("div",{className:e.yellowSquare},r.a.createElement(At.a,{htmlColor:"white",className:e.completionIcon})),o=c.in_progress):(n=r.a.createElement("div",{className:e.redSquare},r.a.createElement(Pt.a,{htmlColor:"white",className:e.completionIcon})),o=c.not_started),r.a.createElement("div",{className:e.controls,key:a},r.a.createElement(ke.a,{container:!0,justify:"space-around",alignItems:"center"},r.a.createElement(ke.a,{item:!0,xs:1},n),r.a.createElement(ke.a,{item:!0,xs:6},r.a.createElement(ke.a,{container:!0,justify:"center",direction:"column",alignItems:"center"},r.a.createElement(ke.a,{item:!0,className:e.courses_text},r.a.createElement(Re.a,{className:e.pointer,component:"p",variant:"body2",onClick:function(){return e=i.id,t(jt(1)),void t(it(s,e));var e}},i.course_name)),r.a.createElement(ke.a,{item:!0,className:e.courses_text},r.a.createElement(Re.a,{component:"p",variant:"subtitle2",color:"textSecondary"},o)))),r.a.createElement(ke.a,{item:!0,xs:2},r.a.createElement(It.a,{disabled:!i.start_date,onClick:function(){return window.open(i.course_grades,"_blank")}},r.a.createElement(ke.a,{container:!0,justify:"flex-end",direction:"row",alignContent:"center"},r.a.createElement(ke.a,{item:!0},r.a.createElement(Re.a,{component:"p",variant:"subtitle2"},c.show_details)))))))},O=g.length+E.length,y=E.length/O*100,j=y/20;return Object(n.useEffect)((function(){d<y&&setTimeout((function(){return p(y)}),25)}),[d,y,j]),r.a.createElement(Ne.a,{className:e.root},r.a.createElement("div",{className:e.details},r.a.createElement(Mt.a,{className:e.content},r.a.createElement(ke.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(ke.a,{item:!0,xs:10},r.a.createElement(ke.a,{container:!0,justify:"center",direction:"column",alignItems:"center"},r.a.createElement(ke.a,{item:!0},r.a.createElement(Re.a,{component:"h6",variant:"h6"},c.course_completed)),r.a.createElement(Nt.a,null),r.a.createElement(ke.a,{item:!0},r.a.createElement(Re.a,{component:"h5",variant:"h5"},r.a.createElement(Ge.a,{fontWeight:700},Math.round(d),"%"))))),r.a.createElement(ke.a,{item:!0,xs:2},r.a.createElement("div",{style:{float:"right",position:"relative"}},r.a.createElement(Bt.a,{fontSize:"large",style:{color:"#2195f4",position:"absolute",left:"8px",bottom:"11px"}}),r.a.createElement(Le.a,{variant:"static",size:50,value:Math.round(d),style:{color:"#2195f4"}}))))),r.a.createElement("div",{className:e.courseList},b.map((function(e){return h(e)})))))},qt=a(286),Yt=a(288),Gt=a(289),zt=a(229),Xt=a(153),Kt=a.n(Xt),Jt=a(99),Zt=a.n(Jt),$t=a(55),Qt=a.n($t),ea=a(154),ta=a.n(ea),aa=a(301),na=function(e){var t=e.value,a=e.handleFieldChange;"false"===t?t=!1:"true"===t&&(t=!0);var l=Object(n.useCallback)((function(e){a(e.target.checked)}),[a]);return r.a.createElement(aa.a,{checked:t,onChange:l,color:"primary"})},ra=a(287),la=a(283),ca=a(302),oa=Object(Ce.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),maxWidth:250}}})),sa=function(e){var t=e.value,a=e.handleFieldChange,l=e.options,c=oa(),o=Object(n.useCallback)((function(e){a(e.target.value)}),[a]);return r.a.createElement(la.a,{className:c.formControl},r.a.createElement(ca.a,{value:t,onChange:o,displayEmpty:!0,className:c.selectEmpty,inputProps:{"aria-label":"Without label"}},l.map((function(e,t){return r.a.createElement(ra.a,{key:t,value:e.value},e.name)}))))},ia=a(304),ua=Object(Ce.a)((function(){return{inputField:{width:250}}})),ma=function(e){var t=e.handleFieldChange,a=e.value,l=ua(),c=Object(n.useCallback)((function(e){t(e.target.value)}),[t]);return r.a.createElement(ia.a,{value:a,variant:"outlined",className:l.inputField,onChange:c})},da=Object(Ce.a)((function(){return{inputField:{width:250}}})),pa=function(e){var t=e.config,a=e.field,l=da(),c=Object(o.c)((function(e){return{userProfile:e.quickSearch.userProfile}})).userProfile,s=a.name,i=a.label,u=a.type,m=a.options,d=c[t],p=Object(o.b)(),f=Object(n.useCallback)((function(){var e="";"select"===u&&(e=m[0].value),p(Et(s,t,e))}),[p,t,m,s,u]),b=Object(n.useCallback)((function(e){p(Et(s,t,e))}),[p,t,s]),g=Object(n.useCallback)((function(e){return"checkbox"===e?r.a.createElement(Yt.a,null,r.a.createElement(Qt.a,null)):"select"===e?r.a.createElement(Yt.a,null,r.a.createElement(Kt.a,null)):"text"===e?r.a.createElement(Yt.a,null,r.a.createElement(ta.a,null)):void 0}),[]),E=Object(n.useCallback)((function(e,t){return"checkbox"===e?r.a.createElement(na,{value:t,className:l.inputField,handleFieldChange:b}):"select"===e?r.a.createElement(sa,{value:t,className:l.inputField,handleFieldChange:b,options:m}):r.a.createElement(ma,{value:t,className:l.inputField,handleFieldChange:b})}),[l.inputField,b,m]),h=Object(n.useCallback)((function(e){return r.a.createElement(Gt.a,{primary:e})}),[]);return d.hasOwnProperty(s)?r.a.createElement(r.a.Fragment,null,r.a.createElement(zt.a,null,g(u),h(i),E(u,d[s])),r.a.createElement(Nt.a,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(zt.a,null,g(u),r.a.createElement(Gt.a,{primary:i}),r.a.createElement(qt.a,{component:"div",disablePadding:!0},r.a.createElement(It.a,{"aria-label":"add",color:"primary",onClick:function(){return f()}},r.a.createElement(Zt.a,null)))),r.a.createElement(Nt.a,null))},fa=a(100),ba=a.n(fa),ga=a(167),Ea=a(29),ha=a(297),Oa=a(155),ya=a.n(Oa),ja=Object(Ce.a)((function(e){var t,a,n;return{container:(t={display:"flex",flexDirection:"row"},Object(u.a)(t,e.breakpoints.down(650),{flexDirection:"column",margin:"auto"}),Object(u.a)(t,"width","100%"),t),listText:{marginRight:"1em"},listTextElement:(a={maxWidth:"200px",cursor:"pointer"},Object(u.a)(a,e.breakpoints.down(1275),{maxWidth:"none"}),Object(u.a)(a,e.breakpoints.down(800),{maxWidth:"300px"}),a),listTextElementSub:(n={maxWidth:"200px"},Object(u.a)(n,e.breakpoints.down(1275),{maxWidth:"none"}),Object(u.a)(n,e.breakpoints.down(800),{maxWidth:"300px"}),Object(u.a)(n,"fontSize","0.8em"),n)}})),va=function(){var e=ja(),t=Object(o.b)(),a=Object(o.c)((function(e){return{userProfile:e.quickSearch.userProfile,enrollments:e.userManagement.enrollments,trad:e.translations.values}})),l=a.trad,c=a.userProfile,s=a.enrollments,i={};Object.keys(c.enrollments).map((function(e){return i[e]=c.custom_field[e]}));var u=[];for(var m in i)i[m]&&u.push([m,i[m]]);u.sort((function(e,t){return Object(Ze.a)(e,2)[1]-Object(Ze.a)(t,2)[1]}));var d={};return u.forEach((function(e){d[e[0]]=e[1]})),r.a.createElement(n.Fragment,null,Object.entries(d).map((function(a){var o=Object(Ze.a)(a,2),i=o[0],u=o[1],m=2629743e3,d=parseInt(u,10)+m,p=Xe()(d).format("YYYY-MM-DD");return r.a.createElement(n.Fragment,{key:i},r.a.createElement(zt.a,null,r.a.createElement(Yt.a,null,r.a.createElement(ba.a,null)),r.a.createElement(ke.a,{className:e.container},r.a.createElement(Gt.a,{className:e.listText,disableTypography:!0,primary:r.a.createElement(Re.a,{className:e.listTextElement,onClick:function(){return function(e){t(jt(1)),t(it(s,e))}(c.enrollments[i].id)}},c.enrollments[i].course_name," "),secondary:r.a.createElement(Re.a,{className:e.listTextElementSub},i)}),r.a.createElement(Ea.a,{utils:ga.a,locale:ya.a},r.a.createElement(ha.a,{margin:"normal",label:l.register_date,format:"dd/MM/yyyy",value:p,helperText:"",onChange:function(e){var a=1e3*Xe()(e).unix();t(function(e,t){return{type:I,payload:{date:e,courseId:t}}}(a-m,i))},KeyboardButtonProps:{"aria-label":"change date"}})))),r.a.createElement(Nt.a,null))})))},xa=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return{timeTrackingUser:e.quickSearch.timeTrackingUser,trad:e.translations.values,timeTrackingModalOpen:e.quickSearch.timeTrackingModalOpen,secondsToaddToUserCourseByHours:e.quickSearch.secondsToaddToUserCourseByHours,secondsToaddToUserCourseByMinutes:e.quickSearch.secondsToaddToUserCourseByMinutes,userProfile:e.quickSearch.userProfile}})),a=t.timeTrackingModalOpen,n=t.trad,l=t.timeTrackingUser,c=t.secondsToaddToUserCourseByHours,s=t.secondsToaddToUserCourseByMinutes,i=t.userProfile.email,u=c+s,m=function(){e({type:ae})};return r.a.createElement(ke.a,null,r.a.createElement(tt.a,{open:a,onClose:m,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Qe.a,null,r.a.createElement(et.a,{id:"alert-dialog-description"},n.add_time_to_user)),r.a.createElement(ke.a,{container:!0},r.a.createElement(ke.a,{item:!0,xs:1}),r.a.createElement(ke.a,{item:!0,xs:4},r.a.createElement(ia.a,{id:"outlined-number",label:"Heures",type:"number",InputLabelProps:{shrink:!0},InputProps:{inputProps:{min:0,max:100}},variant:"outlined",onChange:function(t){var a;e((a=3600*parseInt(t.target.value,10),{type:re,payload:a}))},fullWidth:!0})),r.a.createElement(ke.a,{item:!0,xs:2}),r.a.createElement(ke.a,{item:!0,xs:4},r.a.createElement(ia.a,{id:"outlined-number",label:"Minutes",type:"number",InputLabelProps:{shrink:!0},InputProps:{inputProps:{min:0,max:60}},variant:"outlined",onChange:function(t){var a;e((a=60*parseInt(t.target.value,10),{type:le,payload:a}))},fullWidth:!0})),r.a.createElement(ke.a,{item:!0,xs:1})),r.a.createElement($e.a,null,r.a.createElement(Ae.a,{onClick:function(){e(function(e,t,a){return function(){var n=Object(ot.a)(ct.a.mark((function n(r){var l,c,o,s,i,u,m,d,p;return ct.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(s in l={courseId:e,secondsToAdd:t},c={user_email:JSON.stringify(a),time:JSON.stringify(t),course_section:JSON.stringify("extra"),course_sub_section:JSON.stringify("extra")},o=[],c)i=encodeURIComponent(s),u=encodeURIComponent(c[s]).replaceAll("%22",""),o.push(i+"="+u);return o=o.join("&"),m=window.props.endpoints.updateUserTimeTracking.replace("<courseId>",e),d={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken,Accept:"application/json, text/javascript, */*; q=0.01","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},body:o},n.next=10,fetch(m,d);case 10:if(!n.sent.ok){n.next=20;break}for(p in c={user_email:JSON.stringify(a)},o=[],c)i=encodeURIComponent(p),u=encodeURIComponent(c[p]).replaceAll("%22",""),o.push(i+"="+u);return m=window.props.endpoints.updateUserTimeTrackingSuccess.replace("<courseId>",e),d={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken,Accept:"application/json, text/javascript, */*; q=0.01","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},body:o},n.next=19,fetch(m,d);case 19:n.sent;case 20:r({type:ne,payload:l});case 21:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(l,u,i))},color:"primary"},n.add),r.a.createElement(Ae.a,{onClick:m,color:"primary"},n.cancel))))},Ca=Object(Ce.a)((function(){return{icon:{marginLeft:"0.5em"}}})),_a=function(){var e=Ca(),t=Object(o.b)(),a=Object(o.c)((function(e){return{userProfile:e.quickSearch.userProfile}})).userProfile,l=Object.values(a.enrollments).filter((function(e){return void 0!==e.time_tracking})),c=function(e){t({type:te,payload:e})};return l.forEach((function(e){var t=e.time_tracking;"number"===typeof t&&(e.time_tracking=new Date(1e3*t).toISOString().substr(11,8))})),r.a.createElement(n.Fragment,null,l.map((function(t,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement(zt.a,null,r.a.createElement(Yt.a,null,r.a.createElement(ba.a,null)),r.a.createElement(Gt.a,{primary:t.course_name}),r.a.createElement(Re.a,null,t.time_tracking),r.a.createElement(It.a,{color:"primary",onClick:function(){return c(t.id)},className:e.icon,"aria-label":"add"},r.a.createElement(Zt.a,null))),r.a.createElement(Nt.a,null))})),r.a.createElement(xa,null))},ka=a(156),wa=a.n(ka),Sa=a(157),Ta=a.n(Sa),Ma=function(){var e=Object(o.c)((function(e){return{userProfile:e.quickSearch.userProfile,trad:e.translations.values}})),t=e.trad,a=e.userProfile,l=Xe()(a.custom_field.last_update_date).format("DD/MM/YYYY");return r.a.createElement(n.Fragment,null,r.a.createElement(n.Fragment,null,r.a.createElement(zt.a,null,r.a.createElement(Yt.a,null,r.a.createElement(wa.a,null)),r.a.createElement(Gt.a,{primary:t.last_modification_maker}),r.a.createElement(Re.a,null,a.custom_field.last_update_maker)),r.a.createElement(Nt.a,null),r.a.createElement(zt.a,null,r.a.createElement(Yt.a,null,r.a.createElement(Ta.a,null)),r.a.createElement(Gt.a,{primary:t.last_modification_date}),r.a.createElement(Re.a,null,l))))},Na=function(){var e=Object(o.c)((function(e){return{trad:e.translations.values,configuration:e.configuration.values,userProfile:e.quickSearch.userProfile}})),t=e.trad,a=e.configuration,l=e.userProfile,c=l.field_configs,s=l.certificate_configs,i={};Object.keys(l.enrollments).map((function(e){return i[e]=l.custom_field[e]}));var u=Object.values(i),m=!1;u.forEach((function(e){e&&(m=!0)}));var d=Object.values(l.enrollments).filter((function(e){return void 0!==e.time_tracking})),p=!1;a&&a.DISPLAY_TIME_TRACKING&&(p=!0);var f=Object(n.useCallback)((function(e,t,a){return e.length?r.a.createElement(ke.a,{style:{marginBottom:"35px"}},r.a.createElement(ke.a,{container:!0,justify:"center",direction:"column",alignItems:"center",style:{marginBottom:"15px"}},r.a.createElement(ke.a,{item:!0},r.a.createElement(Re.a,{component:"h6",variant:"h6"},a))),e.map((function(e,a){return r.a.createElement(pa,{key:a,field:e,config:t})}))):null}),[]),b=Object(n.useCallback)((function(){return r.a.createElement(ke.a,{style:{marginBottom:"35px"}},r.a.createElement(ke.a,{container:!0,justify:"center",direction:"column",alignItems:"center",style:{marginBottom:"15px"}},r.a.createElement(ke.a,{item:!0},r.a.createElement(Re.a,{component:"h6",variant:"h6"},t.time_stamp_editor))),r.a.createElement(va,null))}),[t]),g=Object(n.useCallback)((function(){return r.a.createElement(ke.a,{style:{marginBottom:"35px"}},r.a.createElement(ke.a,{container:!0,justify:"center",direction:"column",alignItems:"center",style:{marginBottom:"15px"}},r.a.createElement(ke.a,{item:!0},r.a.createElement(Re.a,{component:"h6",variant:"h6"},t.last_modifications))),r.a.createElement(Ma,null))}),[t]),E=Object(n.useCallback)((function(){return r.a.createElement(ke.a,{style:{marginBottom:"35px"}},r.a.createElement(ke.a,{container:!0,justify:"center",direction:"column",alignItems:"center",style:{marginBottom:"15px"}},r.a.createElement(ke.a,{item:!0},r.a.createElement(Re.a,{component:"h6",variant:"h6"},t.time_tracking))),r.a.createElement(_a,null))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(qt.a,{component:"nav","aria-labelledby":"nested-list-subheader"},f(c,"custom_field",t.custom_field_editor),m&&b(),f(s,"certificate_form_extra",t.certificate_form_extra_editor),p&&d.length>0&&E(),l.custom_field.last_update_date&&g()))},Ia=a(299),Fa=a(303),Ra=Object(Ce.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),La=function(e){return r.a.createElement(Ia.a,Object.assign({elevation:6,variant:"filled"},e))},Pa=function(e){var t=e.snackData,a=e.open,n=e.setOpenSnack,l=t.message,c=t.severity,o=Ra(),s=function(e,t){"clickaway"!==t&&n(!1)};return r.a.createElement(ke.a,{className:o.root},r.a.createElement(Fa.a,{open:a,autoHideDuration:6e3,onClose:s},r.a.createElement(La,{onClose:s,severity:c},l)))},Da=a(158),Aa=a.n(Da),Ua=Object(Ce.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,padding:20},nested:{paddingLeft:e.spacing(4)},button:{width:"100%"}}})),Ba=function(){var e=Object(o.c)((function(e){return{userProfile:e.quickSearch.userProfile,trad:e.translations.values,snackSettings:e.quickSearch.snackSettings,customFieldSaveOn:e.quickSearch.customFieldSaveOn}})),t=e.userProfile,a=e.trad,l=e.snackSettings,c=e.customFieldSaveOn,s=Ua(),i=r.a.useState(!1),u=Object(Ze.a)(i,2),m=u[0],d=u[1],p=Object(o.b)(),f=Object(n.useCallback)((function(){p(function(e){return function(){var t=Object(ot.a)(ct.a.mark((function t(a){var n,r,l,c,o,s,i,u,m,d;return ct.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.custom_field,e.certificate_form_extra,r={},l=200,c="",!n){t.next=17;break}for(o=window.props.endpoints.saveNewCustomFields,s=new FormData,i=Object.keys(n),u=0;u<i.length;u++)s.append(i[u],n[i[u]]);return s.append("user_id_for_api",e.id),m={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken},contentType:!1,processData:!1,body:s},t.next=14,fetch(o,m);case 14:d=t.sent,c=d.statusText,200!==d.status&&(l=d.status);case 17:r=200===l?{severity:"success",message:c}:{severity:"error",message:c};case 18:a({type:R,payload:{snackSettings:r}});case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[p,t]);return Object(n.useEffect)((function(){l.message&&d(!0)}),[l]),r.a.createElement(Ne.a,{className:s.root},r.a.createElement(Mt.a,null,r.a.createElement(Pa,{snackData:l,open:m,setOpenSnack:d}),r.a.createElement(Na,null),r.a.createElement(Ae.a,{className:s.button,disabled:!c,variant:"contained",color:"primary",endIcon:r.a.createElement(Aa.a,null),onClick:f},a.save)))},Ha=Object(Ce.a)((function(e){return{margin:{margin:e.spacing(1)},spinner:{textAlign:"center"},button:{marginLeft:10,width:150},form:{marginTop:20,marginBottom:20,display:"flex",flexDirection:"column"},input:{paddingLeft:5,height:36,marginRight:30,width:400},searchCard:{width:"70%",margin:"auto",marginTop:"20px",marginBottom:"20px"}}})),Wa=function(){var e=Object(o.c)((function(e){return{userProfile:e.quickSearch.userProfile,loadingProfile:e.quickSearch.loadingProfile,searchMade:e.quickSearch.searchMade,trad:e.translations.values,userMail:e.quickSearch.userMail}})),t=e.userProfile,a=e.loadingProfile,n=e.searchMade,l=e.trad,c=e.userMail,s=Object(o.b)(),i=Ha();return r.a.createElement("div",{style:{padding:"20px",margin:"auto"}},r.a.createElement(Ne.a,{className:i.searchCard},r.a.createElement(ke.a,{item:!0,xs:12,lg:8,container:!0,direction:"column",style:{fontWeight:700,backgroundColor:"white",padding:20}},r.a.createElement(ke.a,null,l.click_here_for_profile),r.a.createElement(ke.a,{container:!0,spacing:1,alignItems:"flex-end"},r.a.createElement(ke.a,{className:i.form},r.a.createElement(ke.a,{container:!0},r.a.createElement(ke.a,null,r.a.createElement(Ie.a,{value:c,label:"email",className:i.input,placeholder:l.enter_mail,inputProps:{spellCheck:!1},onChange:function(e){return t=e.target.value,void s(vt(t));var t},onKeyDown:function(e){"Enter"===e.key&&s(bt(c))}})),r.a.createElement(ke.a,null,r.a.createElement(Ae.a,{className:i.button,onClick:function(){s(bt(c))},type:"submit",disabled:a,variant:"contained",color:"primary",startIcon:r.a.createElement(De.a,null)},l.launch_search))))))),Object.keys(t).length>0&&n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{container:!0,justify:"center",alignItems:"flex-start",style:{marginBottom:"20px"}},r.a.createElement(ke.a,{item:!0,xs:12,lg:8},r.a.createElement(Je,null)),r.a.createElement(ke.a,{item:!0,xs:12,lg:4},r.a.createElement(_t,null),t.is_locked&&r.a.createElement(Tt,null))),r.a.createElement(ke.a,{container:!0,justify:"center",alignItems:"flex-start",spacing:6},r.a.createElement(Fe.a,{in:!0},r.a.createElement(ke.a,{item:!0,xs:12,lg:6},r.a.createElement(Vt,null))),r.a.createElement(Fe.a,{in:!0},r.a.createElement(ke.a,{item:!0,xs:12,lg:6},r.a.createElement(Ba,null))))),0===Object.keys(t).length&&n&&r.a.createElement(Re.a,{component:"p",style:{color:"red",margin:"50px"}},l.email_doesnt_match),a&&r.a.createElement("div",{className:i.spinner},r.a.createElement(Le.a,{thickness:4,size:120})))},Va=a(166),qa=a.n(Va),Ya=a(18),Ga=a(159),za=a.n(Ga),Xa=Object(Ce.a)((function(e){return{selectedItem:{backgroundColor:Object(Ya.e)(e.palette.primary.main,.86),borderRadius:"5px",cursor:"pointer",margin:"4px 0",color:e.palette.primary.main},item:{backgroundColor:"white",cursor:"pointer",margin:"4px 0"},icon:{backgroundColor:e.palette.primary.main,color:"white",borderRadius:"10%",marginRight:20,padding:5,width:30,height:30},selectedIcon:{backgroundColor:Object(Ya.e)(e.palette.primary.main,.86),color:e.palette.primary.main,borderRadius:"10%",marginRight:20,padding:0,width:30,height:30},primaryText:{fontWeight:900,direction:"ltr"},secondaryText:{direction:"ltr"}}})),Ka=function(e){var t=e.course,a=e.globalMode,l=Xa(),c=Object(o.c)((function(e){return{enrollments:e.userManagement.enrollments,selectedCourse:e.userManagement.selectedCourse}})),s=c.enrollments,i=c.selectedCourse,u=Object(n.useState)(!1),m=Object(Ze.a)(u,2),d=m[0],p=m[1];Object(n.useEffect)((function(){t&&i===t[0]||a&&!i?p(!0):p(!1)}),[t,a,i]);var f=Object(o.b)(),b=Object(n.useCallback)((function(){f(function(e){return{type:E,payload:e}}(a))}),[f,a]),g=Object(n.useCallback)((function(){f(it(s,t[0]))}),[t,f,s]);return r.a.createElement("div",{onClick:function(){return a?b():g()}},r.a.createElement(zt.a,{className:d?l.selectedItem:l.item},r.a.createElement(Gt.a,{classes:{primary:l.primaryText,secondary:l.secondaryText},primary:a?"GLOBAL":t[1].display_name,secondary:!a&&t[0]}),r.a.createElement(za.a,{className:d?l.selectedIcon:l.icon})),r.a.createElement(Nt.a,null))},Ja=a(291),Za=Object(Ce.a)((function(e){return{root:{width:"calc(100%-80px)",padding:"40px"}}})),$a=function(){var e=Za();return r.a.createElement("div",{className:e.root},r.a.createElement(Ja.a,{color:"primary"}))},Qa=a(160),en=a.n(Qa),tn=function(e){var t=e.courses,a=(e.isOpened,e.handleClick),l=Object(o.c)((function(e){return{isLoading:e.userManagement.isLoading}})).isLoading,c=Object(n.useCallback)((function(){var e=[];return Object.keys(t).forEach((function(t){e.push(t)})),e.map((function(e){return r.a.createElement(Ka,{key:e,course:[e,t[e]],globalMode:!1})}))}),[t]),s=Object(n.useCallback)((function(){return r.a.createElement(Ka,{globalMode:!0})}),[]);return r.a.createElement(n.Fragment,null,r.a.createElement(It.a,{"aria-label":"hidden",onClick:a},r.a.createElement(en.a,null)),s(),l?r.a.createElement($a,null):c())},an=a(292),nn=a(300),rn=Object(Ce.a)((function(e){return{menu:{marginBottom:"0,3em"}}})),ln=function(e){var t=e.value,a=e.handleChangeTab,l=e.tabsList,c=rn(),o=Object(n.useCallback)((function(){return l.map((function(e,t){return r.a.createElement(an.a,{label:e,key:t})}))}),[l]);return r.a.createElement(nn.a,{value:t,indicatorColor:"primary",textColor:"primary",onChange:a,className:c.menu},o())},cn=a(294),on=a(161),sn=a.n(on),un=a(35),mn=a.n(un),dn=Object(Ce.a)((function(){return{text:{marginLeft:"16px"}}})),pn=function(e){var t=e.startDate,a=e.endDate,l=e.trad,c=dn(),o=Xe()().format("YYYY-MM-DDTHH:mm:ssZ"),s=Xe()(t),i=Xe()(a);return!t||s.isAfter(o)?r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,{container:!0,alignItems:"center"},r.a.createElement(ke.a,{item:!0},r.a.createElement(mn.a,null)),r.a.createElement(ke.a,null,r.a.createElement(Re.a,{className:c.text},l.closed_registration)))):i.isAfter(o)?r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,{container:!0,alignItems:"center"},r.a.createElement(ke.a,{item:!0},r.a.createElement(Qt.a,null)),r.a.createElement(ke.a,null,r.a.createElement(Re.a,{className:c.text},l.open_registration," ",l.from," ",Xe()(t).format("DD/MM/YYYY")," ",l.to," ",Xe()(a).format("DD/MM/YYYY"))))):a?r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,{container:!0,alignItems:"center"},r.a.createElement(ke.a,{item:!0},r.a.createElement(mn.a,null)),r.a.createElement(ke.a,null,r.a.createElement(Re.a,{className:c.text},l.closed_registration)))):r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,{container:!0,alignItems:"center"},r.a.createElement(ke.a,{item:!0},r.a.createElement(Qt.a,null)),r.a.createElement(ke.a,null,r.a.createElement(Re.a,{className:c.text},l.open_registration," ",l.since," ",Xe()(t).format("DD/MM/YYYY")))))},fn=Object(Ce.a)((function(){return{text:{marginLeft:"16px"}}})),bn=function(e){var t=e.startDate,a=e.endDate,l=e.trad,c=fn(),o=Xe()().format("YYYY-MM-DDTHH:mm:ssZ"),s=Xe()(t),i=Xe()(a);return s.isAfter(o)?r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,{container:!0,alignItems:"center"},r.a.createElement(ke.a,{item:!0},r.a.createElement(mn.a,null)),r.a.createElement(ke.a,null,r.a.createElement(Re.a,{className:c.text},l.closed_course)))):i.isAfter(o)?r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,{container:!0,alignItems:"center"},r.a.createElement(ke.a,{item:!0},r.a.createElement(Qt.a,null)),r.a.createElement(ke.a,null,r.a.createElement(Re.a,{className:c.text},l.open_course," ",l.from," ",Xe()(t).format("DD/MM/YYYY")," ",l.to," ",Xe()(a).format("DD/MM/YYYY"))))):a?r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,{container:!0,alignItems:"center"},r.a.createElement(ke.a,{item:!0},r.a.createElement(mn.a,null)),r.a.createElement(ke.a,null,r.a.createElement(Re.a,{className:c.text},l.closed_course)))):r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,{container:!0,alignItems:"center"},r.a.createElement(ke.a,{item:!0},r.a.createElement(Qt.a,null)),r.a.createElement(ke.a,null,r.a.createElement(Re.a,{className:c.text},l.open_course," ",l.since," ",Xe()(t).format("DD/MM/YYYY")))))},gn=a(162),En=a.n(gn),hn=a(293);function On(){var e=Object(o.b)(),t=Object(o.c)((function(e){return{generatedGradeReportMessage:e.userManagement.generatedGradeReportMessage,messageModalOpen:e.userManagement.messageModalOpen,trad:e.translations.values}})),a=t.messageModalOpen,n=t.generatedGradeReportMessage,l=t.trad,c=function(){var t;e({type:Q,payload:t})};return r.a.createElement("div",null,r.a.createElement(tt.a,{open:a,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Qe.a,null,n?r.a.createElement(et.a,{id:"alert-dialog-description"},n):r.a.createElement(et.a,{id:"alert-dialog-description"},l.work_running)),r.a.createElement($e.a,null,r.a.createElement(Ae.a,{onClick:c,color:"primary"},l.understand))))}var yn=Object(Ce.a)((function(e){return{root:{flexGrow:1,overflow:"hidden",padding:e.spacing(0,3)},paper:{margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(2)},paperDate:{margin:"".concat(e.spacing(2),"px auto"),padding:e.spacing(2),height:"60px"},link:{color:"inherit",cursor:"pointer","&:hover":{color:"inherit !important"}},textHover:{"&:hover":{textDecoration:"underline"}},legend:{fontSize:"0.8em"},radioContainer:{flexDirection:"row",marginTop:"1em"},radioButton:{marginTop:"-4px"},formControlLabel:{marginTop:"3px"},checkboxContainer:{marginLeft:"2px"}}})),jn=function(e){var t=e.courseId,a=e.trad,n=e.selectedCourse,l=Object(o.c)((function(e){return{configuration:e.configuration.values,scope:e.userManagement.scope}})),c=l.configuration,s=l.scope,i=yn(),u=Object(o.b)(),m=window.props.endpoints.studioLink+n,d=function(e){var t;u(function(e,t){return function(){var a=Object(ot.a)(ct.a.mark((function a(n){var r,l,c,o,s,i;return ct.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("inside react app generateReport"),r={},l={},console.log("inside react app generateReport 2"),r.fields=["user_id","email","first_name","last_name","inscription_date","last_connexion","time_tracking","grade_detailed","exercises_grade","exercises_answers","grade_final","certified","days_left","cas_pratique_grade"],r.receivers=[window.props.user_email],r.scope=t,r.courseId=e,c=window.props.endpoints.runScriptFromBack,console.log("inside react app generateReport 3"),console.log(c),console.log(r),o={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken},contentType:!1,processData:!1,body:JSON.stringify(r)},a.next=16,fetch(c,o);case 16:return s=a.sent,a.next=19,s.json();case 19:i=a.sent,l={sendGradeReportMessage:window.props.translations.grade_report_on_progress+i.user_email},n({type:N,payload:l}),a.next=26;break;case 24:l={sendGradeReportMessage:window.props.translations.grade_report_on_progress+"dimitri.hoareau@themoocagency.com",courseId:e},n({type:N,payload:l});case 26:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e,s)),u({type:$,payload:t})},p=!0;c&&c.HIDE_CONTRIBUTE_TO_COURSE&&(p=!1);return r.a.createElement(ke.a,{className:i.root},r.a.createElement(Ye.a,{className:i.paper},r.a.createElement(bn,{startDate:t.start,endDate:t.end,trad:a})),r.a.createElement(Ye.a,{className:i.paper},r.a.createElement(pn,{startDate:t.enrollment_start,endDate:t.enrollment_end,trad:a})),p&&r.a.createElement(Ye.a,{className:i.paper},r.a.createElement(ke.a,{container:!0,wrap:"nowrap",spacing:2},r.a.createElement(ke.a,{item:!0},r.a.createElement(hn.a,{onClick:function(){return window.open(m,"_blank")},className:i.link},r.a.createElement(sn.a,null))),r.a.createElement(ke.a,{item:!0,xs:!0},r.a.createElement(hn.a,{onClick:function(){return window.open(m,"_blank")},className:i.link},r.a.createElement(Re.a,{className:i.textHover},a.contribute_to_the_course)),r.a.createElement(Re.a,{className:i.legend},a.redirection)))),r.a.createElement(Ye.a,{className:i.paper},r.a.createElement(ke.a,{container:!0,wrap:"nowrap",spacing:2},r.a.createElement(ke.a,{item:!0},r.a.createElement(hn.a,{onClick:function(){return d(n)},className:i.link},r.a.createElement(En.a,null))),r.a.createElement(ke.a,{item:!0,xs:!0},r.a.createElement(hn.a,{onClick:function(){return d(n)},className:i.link},r.a.createElement(Re.a,{className:i.textHover},a.generate_grade_report)),r.a.createElement(Re.a,{className:i.legend},a.send_report)))),r.a.createElement(On,null))},vn=Object(Ce.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.main},grid:{padding:e.spacing(2),textAlign:"center",color:"#000",backgroundColor:"#FFF",borderRadius:"5px"},number:{textAlign:"center",fontSize:"1.6em",fontWeight:"bold"},text:{textAlign:"center"},availableSoon:{textAlign:"center",fontSize:"1.5em",fontWeight:"bold"}}})),xn=function(e){e.courses,e.trad;var t=vn();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{className:t.root,container:!0,justify:"center",alignItems:"center",spacing:2},r.a.createElement(Ye.a,{style:{padding:20,width:"calc(100% - 20px)",marginTop:20}},r.a.createElement(ke.a,{item:!0,xs:12,sm:12},"Veuillez selectionner un cours."))))},Cn=(a.p,Object(Ce.a)((function(e){return{container:{backgroundColor:e.palette.background.main,marginTop:"-20px"},containerTop:{margin:"10px"},gridTop:{padding:"20px 0px 20px 80px",borderRadius:"5px"},gridBottom:Object(u.a)({padding:"10px",margin:"10px",width:"46%",borderRadius:"5px"},e.breakpoints.down(1610),{width:"100%"}),image:{width:"200px"},altImage:{width:"200px"},title:{marginBottom:"1em",maxWidth:"200px"},flexContainer:{flexGrow:1}}}))),_n=function(){var e=Object(o.c)((function(e){return{selectedCourse:e.userManagement.selectedCourse,globalMode:e.userManagement.displayGlobalMode,courses:e.userManagement.courses,isLoading:e.userManagement.isLoading,trad:e.translations.values}})),t=e.selectedCourse,a=e.courses,l=e.globalMode,c=e.isLoading,s=e.trad,i=Cn(),u=r.a.useState(!1),m=Object(Ze.a)(u,2),d=m[0],p=m[1];return c?r.a.createElement($a,null):l?r.a.createElement(xn,{courses:a,trad:s}):r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,{item:!0,xs:12,className:i.gridTop,container:!0,direction:"row",alignItems:"center",justify:"flex-end"},r.a.createElement(ke.a,{className:i.flexContainer},r.a.createElement(Re.a,{className:i.title},a[t].display_name),r.a.createElement("div",null,function(e){var t=d?{width:"200px"}:{visibility:"hidden"};return r.a.createElement("img",{style:t,src:e,alt:"course logo",onLoad:function(){return p(!0)}})}(a[t].image_url),!d&&r.a.createElement(cn.a,{className:i.image,component:"img",alt:s.course_logo,image:"https://weuplearning.themoocagency.com/wp-content/uploads/sites/8/2019/05/Logo_WeUp_1@6xmarge-horizon.png",title:s.course_logo}))),r.a.createElement(jn,{courseId:a[t],trad:s,selectedCourse:t})))},kn=a(5),wn=a(40),Sn=a.n(wn),Tn=a(68),Mn=a.n(Tn),Nn=a(305),In=a(152),Fn=Object(Ce.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:200,maxWidth:300}}})),Rn=function(e){var t=e.courses,a=e.selectedEnrollments,l=e.selectedCourseId,c=Object(o.c)((function(e){return{selectedCohort:e.userManagement.selectedCohort,trad:e.translations.values}})),s=c.selectedCohort,i=c.trad,u=Fn(),m=Object(o.b)(),p=Object(n.useCallback)((function(e){var n={};Object.entries(t[l].cohorts).forEach((function(t){e===t[1]&&(n={id:t[0],name:e})})),m(function(e,t,a){var n={};Object.entries(e).forEach((function(e){e[1].enrollments[a].cohort.name===t.name&&(n[e[0]]=e[1])}));var r={filteredCohorts:Object(d.a)({},n),cohort:t};return{type:O,payload:r}}(a,n,l))}),[a,l,m,t]),f=Object.entries(t[l].cohorts);return r.a.createElement(la.a,{className:u.formControl},r.a.createElement(Nn.a,{htmlFor:"demo-customized-select-native"},i.cohorts),r.a.createElement(In.a,{value:s,id:"demo-customized-select-native",input:r.a.createElement(Ie.a,null),onChange:function(e){return p(e.target.value)}},r.a.createElement("option",{value:""}),f.map((function(e){return r.a.createElement("option",{key:e[0],value:e[1]},e[1])}))))},Ln=a(309),Pn=Object(Ce.a)((function(e){return{enrollmentStatus:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"space-between"},UnenrollmentStatus:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"flex-end"},enrollmentIcons:{display:"flex",flexDirection:"column",alignContent:"center",cursor:"pointer"},enrollmentText:{display:"flex",flexDirection:"column",alignContent:"flex-start"}}})),Dn=function(e){var t=e.userData,a=Pn(),l=Object(n.useState)("initialState"),c=Object(Ze.a)(l,2),s=c[0],i=c[1],u="error",m="secondary",d=Object(o.c)((function(e){return{enrollments:e.userManagement.enrollments,selectedEnrollments:e.userManagement.selectedEnrollments,globalMode:e.userManagement.displayGlobalMode,courses:e.userManagement.courses,isLoading:e.userManagement.isLoading,selectedCourse:e.userManagement.selectedCourse,selectedCohorts:e.userManagement.selectedCohorts,cohort:e.userManagement.cohort,page:e.userManagement.page,searchBarResult:e.userManagement.searchBarResult,searchValue:e.userManagement.searchValue,showSuggestions:e.userManagement.showSuggestions,trad:e.translations.values,loadedCourses:e.userManagement.loadedCourses}})),p=d.enrollments,f=d.selectedEnrollments,b=d.globalMode,g=d.isLoading,E=d.selectedCourse,h=d.selectedCohorts,O=d.cohort,y=d.searchBarResult,j=d.searchValue,v=d.trad,x=d.loadedCourses,C=Object(n.useState)(p),_=Object(Ze.a)(C,2),k=(_[0],_[1]),w=Object(o.b)(),S=Object(n.useCallback)(function(){var e=Object(ot.a)(ct.a.mark((function e(t,a,n,r,l){return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(a),e.next=3,w(mt(t,a,n,r,l));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r,l){return e.apply(this,arguments)}}(),[w]),T=Object(n.useCallback)((function(e){w(ut(!0)),w(st(e))}),[w]);return Object(n.useEffect)((function(){b||x.includes(E)||T(E)}),[E,T,b,x]),Object(n.useEffect)((function(){g||b||(Object.keys(y).length&&j.length>2?k(y):Object.keys(O).length?k(h):k(f))}),[f,y,j,p,b,O,h,g]),r.a.createElement("div",null,t.enrollments.hasOwnProperty(E)&&t.enrollments[E].is_active&&"unenroll"!==s?r.a.createElement(Ge.a,{component:"div",className:a.enrollmentStatus},r.a.createElement(Ge.a,{component:"div",className:a.enrollmentText},r.a.createElement(Re.a,{variant:"caption"},Xe()(t.enrollments[E].enrollment_date).format("LL"))),r.a.createElement(Ge.a,{component:"div",className:a.enrollmentIcons},r.a.createElement(Ln.a,{title:v.unenroll},r.a.createElement(mn.a,{color:u,onClick:function(e){return S(e,"unenroll",!1,t,E)}})),r.a.createElement(Ln.a,{title:v.notify_unenroll},r.a.createElement(Sn.a,{color:u,onClick:function(e){return S(e,"unenroll",!0,t,E)}})))):r.a.createElement(Ge.a,{component:"div",className:a.UnenrollmentStatus},r.a.createElement(Ge.a,{component:"div",className:a.enrollmentIcons},r.a.createElement(Ln.a,{title:v.enroll},r.a.createElement(Mn.a,{color:m,onClick:function(e){return S(e,"enroll",!1,t,E)}})),r.a.createElement(Ln.a,{title:v.notify_enroll},r.a.createElement(Sn.a,{color:m,onClick:function(e){return S(e,"enroll",!0,t,E)}})))))},An=Object(Ce.a)((function(e){return{enrollmentStatus:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"space-between"},UnenrollmentStatus:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"flex-end"},enrollmentIcons:{display:"flex",flexDirection:"column",alignContent:"center",cursor:"pointer"},enrollmentText:{display:"flex",flexDirection:"column",alignContent:"flex-start"}}})),Un=function(e){var t=e.userData,a=e.course,l=An();console.log(a);var c=Object(n.useState)("initialState"),s=Object(Ze.a)(c,2),i=s[0],u=s[1],m="error",d="secondary",p=Object(o.c)((function(e){return{enrollments:e.userManagement.enrollments,selectedEnrollments:e.userManagement.selectedEnrollments,globalMode:e.userManagement.displayGlobalMode,courses:e.userManagement.courses,isLoading:e.userManagement.isLoading,selectedCourse:e.userManagement.selectedCourse,selectedCohorts:e.userManagement.selectedCohorts,cohort:e.userManagement.cohort,page:e.userManagement.page,searchBarResult:e.userManagement.searchBarResult,searchValue:e.userManagement.searchValue,showSuggestions:e.userManagement.showSuggestions,trad:e.translations.values,loadedCourses:e.userManagement.loadedCourses}})),f=p.enrollments,b=p.selectedEnrollments,g=p.globalMode,E=p.isLoading,h=p.selectedCourse,O=p.selectedCohorts,y=p.cohort,j=p.searchBarResult,v=p.searchValue,x=p.trad,C=p.loadedCourses,_=Object(n.useState)(f),k=Object(Ze.a)(_,2),w=(k[0],k[1]),S=Object(o.b)(),T=Object(n.useCallback)(function(){var e=Object(ot.a)(ct.a.mark((function e(t,a,n,r,l){return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(a),e.next=3,S(mt(t,a,n,r,l));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r,l){return e.apply(this,arguments)}}(),[S]),M=Object(n.useCallback)((function(e){S(ut(!0)),S(st(e))}),[S]);return Object(n.useEffect)((function(){g||C.includes(h)||M(h)}),[h,M,g,C]),Object(n.useEffect)((function(){E||g||(Object.keys(j).length&&v.length>2?w(j):Object.keys(y).length?w(O):w(b))}),[b,j,v,f,g,y,O,E]),t.enrollments.hasOwnProperty(a)&&t.enrollments[a].is_active&&"unenroll"!==i?r.a.createElement(Ge.a,{component:"div",className:l.enrollmentStatus},r.a.createElement(Ge.a,{component:"div",className:l.enrollmentText},r.a.createElement(Re.a,{variant:"caption"},Xe()(t.enrollments[a].enrollment_date).format("LL")),r.a.createElement(Re.a,{variant:"caption"},t.enrollments[a].cohort.name)),r.a.createElement(Ge.a,{component:"div",className:l.enrollmentIcons},r.a.createElement(Ln.a,{title:x.unenroll},r.a.createElement(mn.a,{color:m,onClick:function(e){return T(e,"unenroll",!1,t,a)}})),r.a.createElement(Ln.a,{title:x.notify_unenroll},r.a.createElement(Sn.a,{color:m,onClick:function(e){return T(e,"unenroll",!0,t,a)}})))):r.a.createElement(Ge.a,{component:"div",className:l.UnenrollmentStatus},r.a.createElement(Ge.a,{component:"div",className:l.enrollmentIcons},r.a.createElement(Ln.a,{title:x.enroll},r.a.createElement(Mn.a,{color:d,onClick:function(e){return T(e,"enroll",!1,t,a)}})),r.a.createElement(Ln.a,{title:x.notify_enroll},r.a.createElement(Sn.a,{color:d,onClick:function(e){return T(e,"enroll",!0,t,a)}}))))},Bn=a(310),Hn=a(290),Wn=a(311),Vn=a(175),qn=Object(Ce.a)((function(e){return{root:{marginLeft:"15px"},search:{position:"relative",border:"1px solid black",borderRadius:e.shape.borderRadius,backgroundColor:"#fff","&:hover":{backgroundColor:"#fffafa"},marginLeft:0,width:"300px"},searchIcon:{paddingLeft:"10px",height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#CCC"},inputRoot:{color:"#000"},inputInput:{paddingLeft:"45px !important",paddingTop:"10px",width:"250px"}}})),Yn=function(e){var t,a=e.data,n=Object(o.b)(),l=qn(),c=function(e,t,a){n(function(e,t,a,n){return{type:x,payload:{searchValue:e,searchResult:t,activeSuggestion:a,showSuggestions:n}}}(e,t,a))},s=function(e){n({type:C,payload:e})},i=Object(o.c)((function(e){return{searchValue:e.userManagement.searchValue,trad:e.translations.values}})),m=i.searchValue,p=i.trad,f=Object.values(a),b=f.filter((function(e){return e.email.toLowerCase().includes(m.toLowerCase())})),g=(t="id",b.reduce((function(e,a){return Object(d.a)(Object(d.a)({},e),{},Object(u.a)({},a[t],a))}),{}));return r.a.createElement("div",{className:l.root},r.a.createElement("div",{className:l.search},r.a.createElement("div",{className:l.searchIcon},r.a.createElement(De.a,null)),r.a.createElement(Vn.a,{placeholder:p.search,value:m,classes:{root:l.inputRoot,input:l.inputInput},inputProps:{"aria-label":"search"},onChange:function(e){c(e.target.value,g,f.length),b.length?b.length>=1&&s(!0):s(!1)},onKeyDown:function(e){"Enter"===e.key&&c(m,g,f.length)},onPaste:function(e){!function(e){c(e.clipboardData.getData("Text"),g,f.length)}(e),b.length?b.length>=1&&s(!0):s(!1)}})))},Gn=Object(Ce.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:180},selectEmpty:{marginTop:e.spacing(2)}}})),zn=function(e){var t=e.courseId,a=e.selectedCohort,n=e.user,l=e.courses,c=Object(o.b)(),s=function(e,t,a,n,r){var o={};Object.entries(l[n].cohorts).forEach((function(e){a===e[1]&&(o={id:e[0],name:a})})),c(function(e,t,a,n,r){return function(){var e=Object(ot.a)(ct.a.mark((function e(l){var c,o,s,i,u,m,d,p;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in{},c=window.props.endpoints.updateStudentCohort.replace("<courseId>",n).replace("<cohort.id>",a.id),o={users:JSON.stringify(r)},s=[],o)u=encodeURIComponent(i),m=encodeURIComponent(o[i]).replaceAll("%22",""),s.push(u+"="+m);return s=s.join("&"),d={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken,Accept:"application/json, text/javascript, */*; q=0.01","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},contentType:!1,processData:!1,body:s},e.next=11,fetch(c,d);case 11:return p=e.sent,e.next=14,p.json();case 14:e.sent.success&&l({type:v,payload:{cohort:a,userDataId:t}}),e.next=21;break;case 19:l({type:v,payload:{cohort:a,userDataId:t}});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(0,t,o,n,r))},i=Object.entries(l[t].cohorts),u=Gn();return r.a.createElement("div",null,r.a.createElement(la.a,{variant:"outlined",className:u.formControl},r.a.createElement(ca.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:a,onChange:function(e){s(0,n.id,e.target.value,t,n.email)},onClick:function(e){e.stopPropagation()}},i.map((function(e){return r.a.createElement(ra.a,{key:e[0],value:e[1]},e[1])})))))},Xn=Object(Ce.a)((function(e){return{tabTitle:{backgroundColor:e.palette.primary.main,color:"white",padding:"8px 16px",textTransform:"uppercase",fontWeight:700,fontSize:"16px"}}})),Kn=function(){var e=Xn(),t=Object(o.c)((function(e){return{selectedCourse:e.userManagement.selectedCourse,globalMode:e.userManagement.displayGlobalMode,courses:e.userManagement.courses}})),a=t.selectedCourse,n=t.globalMode,l=t.courses;return r.a.createElement(ke.a,{className:e.tabTitle},n?"global mode":l[a].display_name)},Jn=function(e,t,a){if(-1!==["is_active","last_name","username"].indexOf(a))return t[a]<e[a]?-1:t[a]>e[a]?1:0;var n=Object(d.a)({},e),r=Object(d.a)({},t);return n.enrollments.hasOwnProperty(a)||(n.enrollments[a]={is_active:!1}),r.enrollments.hasOwnProperty(a)||(r.enrollments[a]={is_active:!1}),!r.enrollments[a].is_active&&n.enrollments[a].is_active?-1:r.enrollments[a].is_active&&!n.enrollments[a].is_active?1:void 0},Zn=function(e){var t=e.classes,a=e.onSelectAllClick,l=e.order,c=e.orderBy,s=e.numSelected,i=e.rowCount,u=e.onRequestSort,m=e.courses,d=e.globalMode,p=e.selectedCourseId,f=e.usersSelection,b=e.data,g=Object(n.useState)([]),E=Object(Ze.a)(g,2),h=E[0],O=E[1],y=Object(o.c)((function(e){return{trad:e.translations.values}})).trad,j=Object(n.useCallback)((function(e){return e.split(":")[1]}),[]),v=Object(n.useState)("disabled"),x=Object(Ze.a)(v,2),C=x[0],_=x[1],k=Object(n.useState)("disabled"),w=Object(Ze.a)(k,2),S=w[0],T=w[1],M=Object(o.b)(),N=Object(n.useCallback)(function(){var e=Object(ot.a)(ct.a.mark((function e(t,a,n,r){return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!(f.length>0)){e.next=4;break}return e.next=4,f.forEach((function(e){M(mt(t,a,n,b[e],r))}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),[M,f,b]);Object(n.useEffect)((function(){f.length>0?_("error"):_("disabled"),f.length>0?T("secondary"):T("disabled")}),[f]),Object(n.useEffect)((function(){var e=[{id:"is_active",numeric:!1,disablePadding:!0,label:y.user_status},{id:"last_name",numeric:!1,disablePadding:!1,label:y.name},{id:"username",numeric:!1,disablePadding:!1,label:y.username}];if(d){var t=[].concat(e);Object.keys(m).sort().forEach((function(e){t.push({id:e,numeric:!1,disablePadding:!1,label:m[e].display_name})})),O(t)}else if(m[p]){var a=[].concat(e);a.push({id:p,numeric:!1,disablePadding:!1,label:y.enrollment_status}),Object.values(m[p].cohorts).length&&a.push({id:"cohort",numeric:!1,disablePadding:!1,label:y.cohort}),O(a)}}),[m,d,p,y]);return r.a.createElement(Ve.a,null,r.a.createElement(qe.a,null,r.a.createElement(He.a,{padding:"checkbox"},r.a.createElement(aa.a,{indeterminate:s>0&&s<i,checked:i>0&&s===i,onChange:a,inputProps:{"aria-label":"select user"}})),h.map((function(e,a){return r.a.createElement(He.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:c===e.id&&l},r.a.createElement(Bn.a,{active:c===e.id,direction:c===e.id?l:"asc",onClick:(n=e.id,function(e){u(e,n)})},r.a.createElement(Ge.a,{component:"div",className:t.tableHeadCell},r.a.createElement(Ge.a,{component:"div"},e.label),d&&a>2&&r.a.createElement(Ge.a,{component:"span",className:t.tableHeadCellId},j(e.id),r.a.createElement(Ge.a,{component:"div",className:t.batchEnrollmentIcons},r.a.createElement(Ln.a,{title:y.enroll_selection},r.a.createElement(Mn.a,{color:S,onClick:function(t){N(t,"enroll",!1,e.id)}})),r.a.createElement(Ln.a,{title:y.enroll_and_notify},r.a.createElement(Sn.a,{color:S,onClick:function(t){N(t,"enroll",!0,e.id)}})),r.a.createElement(Ln.a,{title:y.unenroll_selection},r.a.createElement(mn.a,{color:C,onClick:function(t){N(t,"unenroll",!1,e.id)}})),r.a.createElement(Ln.a,{title:y.unenroll_and_notify},r.a.createElement(Sn.a,{color:C,onClick:function(t){N(t,"unenroll",!0,e.id)}}))))),c===e.id?r.a.createElement(Ge.a,{component:"span",className:t.visuallyHidden},"desc"===l?"sorted descending":"sorted ascending"):null));var n}))))},$n=Object(Ce.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:{color:e.palette.primary.main,backgroundColor:Object(Ya.e)(e.palette.primary.main,.85),marginBottom:20},titleWrapper:{marginTop:"6em"},formControl:{margin:e.spacing(1),minWidth:200,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),Qn=function(e){var t=e.numSelected,a=$n();return r.a.createElement(Hn.a,{className:Object(kn.a)(a.root,Object(u.a)({},a.highlight,t>0))},t>0&&r.a.createElement(Re.a,{color:"inherit",variant:"subtitle1",component:"div"},t," selected"))},er=Object(Ce.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},enrollmentStatus:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"space-between"},UnenrollmentStatus:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"flex-end"},enrollmentIcons:{display:"flex",flexDirection:"column",alignContent:"center",cursor:"pointer"},batchEnrollmentIcons:{display:"flex",justifyContent:"space-around"},enrollmentText:{display:"flex",flexDirection:"column",alignContent:"flex-start"},tableHeadCell:{display:"flex",flexDirection:"column",fontSize:"14px",fontWeight:"700"},tableHeadCellId:{fontSize:"10px",fontWeight:"500"},dashedCell:{borderLeft:"1px dashed rgba(224, 224, 224, 1)",minWidth:"250px"},courseViewSelectorClass:{marginBottom:"1.5em",display:"flex",justifyContent:"space-between",alignItems:"baseline"},pointer:{cursor:"pointer"}}})),tr=function(){var e=er(),t=Object(n.useState)("asc"),a=Object(Ze.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)("username"),i=Object(Ze.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)([]),p=Object(Ze.a)(d,2),f=p[0],b=p[1],g=Object(n.useState)(10),E=Object(Ze.a)(g,2),h=E[0],O=E[1],y=Object(o.c)((function(e){return{enrollments:e.userManagement.enrollments,selectedEnrollments:e.userManagement.selectedEnrollments,globalMode:e.userManagement.displayGlobalMode,courses:e.userManagement.courses,isLoading:e.userManagement.isLoading,selectedCourse:e.userManagement.selectedCourse,selectedCohorts:e.userManagement.selectedCohorts,cohort:e.userManagement.cohort,page:e.userManagement.page,searchBarResult:e.userManagement.searchBarResult,searchValue:e.userManagement.searchValue,showSuggestions:e.userManagement.showSuggestions}})),j=y.enrollments,v=y.selectedEnrollments,x=y.globalMode,C=y.courses,_=y.isLoading,k=y.selectedCourse,w=y.selectedCohorts,S=y.cohort,T=y.page,M=y.searchBarResult,N=y.searchValue,I=y.showSuggestions,F=Object(n.useState)(j),R=Object(Ze.a)(F,2),L=R[0],P=R[1],D=Object(o.b)();Object(n.useEffect)((function(){Object.keys(M).length&&N.length>2?P(M):x?P(j):Object.keys(S).length?P(w):P(v)}),[v,M,N,j,x,S,w]);var A=Object(n.useCallback)((function(e,t){c(u===t&&"asc"===l?"desc":"asc"),m(t)}),[u,l]),U=Object(n.useCallback)((function(e){if(e.target.checked){var t=Object.values(L).map((function(e){return e.id}));b(t)}else b([])}),[L]),B=(Object(n.useCallback)((function(e,t){var a=f.indexOf(t),n=[];-1===a?n=n.concat(f,t):0===a?n=n.concat(f.slice(1)):a===f.length-1?n=n.concat(f.slice(0,-1)):a>0&&(n=n.concat(f.slice(0,a),f.slice(a+1))),b(n)}),[f]),Object(n.useCallback)((function(e,t){D(dt(t))}),[D])),H=Object(n.useCallback)((function(e){var t=e.target.value;O(parseInt(t,10)),D(dt(0))}),[D]),W=Object(n.useCallback)((function(t){return C[k]&&Object.keys(C[k].cohorts).length?r.a.createElement(He.a,{align:"left",className:e.dashedCell},r.a.createElement(Ge.a,{component:"div",className:e.enrollmentStatus},r.a.createElement(zn,{courses:C,selectedCohort:t.enrollments[k]&&t.enrollments[k].cohort.name||"",courseId:k,user:t}))):null}),[e.dashedCell,e.enrollmentStatus,C,k]),V=Object(n.useCallback)((function(e){return-1!==f.indexOf(e)}),[f]),q=h-Math.min(h,Object.keys(L).length-T*h);return r.a.createElement("div",{className:e.root},_?r.a.createElement($a,null):r.a.createElement(n.Fragment,null,r.a.createElement(Kn,null),r.a.createElement(Qn,{numSelected:f.length,courses:C,globalMode:x,selectedCourseId:k,selectedEnrollments:v}),r.a.createElement(We.a,{className:e.tableContainer},r.a.createElement(Ge.a,{className:e.courseViewSelectorClass},r.a.createElement(Yn,{data:L}),!x&&C[k]&&Object.values(C[k].cohorts).length>0&&r.a.createElement(Rn,{courses:C,selectedEnrollments:v,selectedCourseId:k})),r.a.createElement(Ue.a,{className:e.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(Zn,{classes:e,numSelected:f.length,order:l,orderBy:u,onSelectAllClick:U,onRequestSort:A,rowCount:Object.keys(L).length,courses:C,globalMode:x,selectedCourseId:k,usersSelection:f,data:L}),I?r.a.createElement(Be.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(Object.values(L),function(e,t){return"desc"===e?function(e,a){return Jn(e,a,t)}:function(e,a){return-Jn(e,a,t)}}(l,u)).slice(T*h,T*h+h).map((function(t,a){var l=V(t.id),c="enhanced-table-checkbox-".concat(a);return r.a.createElement(qe.a,{className:e.pointer,hover:!0,onClick:function(){return e=t.email,D(bt(e)),D(jt(0)),void D(vt(e));var e},role:"checkbox","aria-checked":l,tabIndex:-1,key:t.id,selected:l},r.a.createElement(He.a,{padding:"checkbox"},r.a.createElement(aa.a,{checked:l,inputProps:{"aria-labelledby":c}})),r.a.createElement(He.a,{component:"th",scope:"row",padding:"none"},t.is_active?"Active":"Never connected"),r.a.createElement(He.a,{align:"left"},r.a.createElement(Re.a,{variant:"subtitle2"},t.last_name),r.a.createElement(Re.a,{variant:"caption"},t.first_name)),r.a.createElement(He.a,{align:"left",id:c},r.a.createElement(Re.a,{variant:"subtitle2"},t.username),r.a.createElement(Re.a,{variant:"caption"},t.email)),x?Object.keys(C).sort().map((function(a){return r.a.createElement(He.a,{align:"left",key:a,className:e.dashedCell},r.a.createElement(Un,{course:a,userData:t}))})):r.a.createElement(n.Fragment,null,r.a.createElement(He.a,{align:"left",className:e.dashedCell},r.a.createElement(Dn,{userData:t})),W(t)))})),q>0&&r.a.createElement(qe.a,{style:{height:53*q}},r.a.createElement(He.a,{colSpan:6}))):r.a.createElement(Be.a,null,r.a.createElement(qe.a,{hover:!0,role:"checkbox",tabIndex:-1},r.a.createElement(He.a,{padding:"checkbox"}),r.a.createElement(He.a,null),r.a.createElement(He.a,{align:"left"}),r.a.createElement(He.a,{align:"left"}),r.a.createElement(He.a,{align:"left",className:e.dashedCell}))))),r.a.createElement(Wn.a,{rowsPerPageOptions:[10],component:"div",count:Object.keys(L).length,rowsPerPage:h,page:T,onChangePage:B,onChangeRowsPerPage:H})))},ar=function(e,t,a){if(-1!==["is_active","last_name","username"].indexOf(a))return t[a]<e[a]?-1:t[a]>e[a]?1:0;var n=Object(d.a)({},e),r=Object(d.a)({},t);return n.enrollments.hasOwnProperty(a)||(n.enrollments[a]={is_active:!1}),r.enrollments.hasOwnProperty(a)||(r.enrollments[a]={is_active:!1}),!r.enrollments[a].is_active&&n.enrollments[a].is_active?-1:r.enrollments[a].is_active&&!n.enrollments[a].is_active?1:void 0},nr=function(e){var t=e.classes,a=e.onSelectAllClick,l=e.order,c=e.orderBy,s=e.numSelected,i=e.rowCount,u=e.onRequestSort,m=e.courses,d=e.selectedCourseId,p=Object(n.useState)([]),f=Object(Ze.a)(p,2),b=f[0],g=f[1],E=Object(o.c)((function(e){return{trad:e.translations.values}})).trad;Object(n.useEffect)((function(){var e=[{id:"is_active",numeric:!1,disablePadding:!0,label:E.user_status},{id:"last_name",numeric:!1,disablePadding:!1,label:E.name},{id:"username",numeric:!1,disablePadding:!1,label:E.username}];if(m[d]){var t=[].concat(e);t.push({id:d,numeric:!1,disablePadding:!1,label:E.enrollment_status}),Object.values(m[d].cohorts).length&&t.push({id:"cohort",numeric:!1,disablePadding:!1,label:E.cohort}),g(t)}}),[m,d,E]);return r.a.createElement(Ve.a,null,r.a.createElement(qe.a,null,r.a.createElement(He.a,{padding:"checkbox"},r.a.createElement(aa.a,{indeterminate:s>0&&s<i,checked:i>0&&s===i,onChange:a,inputProps:{"aria-label":"select user"}})),b.map((function(e,a){return r.a.createElement(He.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:c===e.id&&l},r.a.createElement(Bn.a,{active:c===e.id,direction:c===e.id?l:"asc",onClick:(n=e.id,function(e){u(e,n)})},r.a.createElement(Ge.a,{component:"div",className:t.tableHeadCell},r.a.createElement(Ge.a,{component:"div"},e.label)),c===e.id?r.a.createElement(Ge.a,{component:"span",className:t.visuallyHidden},"desc"===l?"sorted descending":"sorted ascending"):null));var n}))))},rr=Object(Ce.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:{color:e.palette.primary.main,backgroundColor:Object(Ya.e)(e.palette.primary.main,.85),marginBottom:20},titleWrapper:{marginTop:"6em"},formControl:{margin:e.spacing(1),minWidth:200,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),lr=function(e){var t=e.numSelected,a=rr();return r.a.createElement(Hn.a,{className:Object(kn.a)(a.root,Object(u.a)({},a.highlight,t>0))},t>0&&r.a.createElement(Re.a,{color:"inherit",variant:"subtitle1",component:"div"},t," selected"))},cr=Object(Ce.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},enrollmentStatus:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"space-between"},UnenrollmentStatus:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"flex-end"},enrollmentIcons:{display:"flex",flexDirection:"column",alignContent:"center",cursor:"pointer"},batchEnrollmentIcons:{display:"flex",justifyContent:"space-around"},enrollmentText:{display:"flex",flexDirection:"column",alignContent:"flex-start"},tableHeadCell:{display:"flex",flexDirection:"column",fontSize:"14px",fontWeight:"700"},tableHeadCellId:{fontSize:"10px",fontWeight:"500"},dashedCell:{borderLeft:"1px dashed rgba(224, 224, 224, 1)",minWidth:"250px"},courseViewSelectorClass:{marginBottom:"1.5em",display:"flex",justifyContent:"space-between",alignItems:"baseline"},pointer:{cursor:"pointer"}}})),or=function(){return r.a.createElement(ke.a,null,"Global")},sr=function(){var e=cr(),t=Object(n.useState)("asc"),a=Object(Ze.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)("username"),i=Object(Ze.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)([]),p=Object(Ze.a)(d,2),f=p[0],b=p[1],g=Object(n.useState)(10),E=Object(Ze.a)(g,2),h=E[0],O=E[1],y=Object(o.c)((function(e){return{enrollments:e.userManagement.enrollments,selectedEnrollments:e.userManagement.selectedEnrollments,globalMode:e.userManagement.displayGlobalMode,courses:e.userManagement.courses,isLoading:e.userManagement.isLoading,selectedCourse:e.userManagement.selectedCourse,selectedCohorts:e.userManagement.selectedCohorts,cohort:e.userManagement.cohort,page:e.userManagement.page,searchBarResult:e.userManagement.searchBarResult,searchValue:e.userManagement.searchValue,showSuggestions:e.userManagement.showSuggestions,trad:e.translations.values,loadedCourses:e.userManagement.loadedCourses}})),j=y.enrollments,v=y.selectedEnrollments,x=y.globalMode,C=y.courses,_=y.isLoading,k=y.selectedCourse,w=y.selectedCohorts,S=y.cohort,T=y.page,M=y.searchBarResult,N=y.searchValue,I=y.showSuggestions,F=y.loadedCourses,R=Object(n.useState)(j),L=Object(Ze.a)(R,2),P=L[0],D=L[1],A=Object(o.b)(),U=Object(n.useCallback)((function(e){A(ut(!0)),A(st(e))}),[A]);Object(n.useEffect)((function(){x||F.includes(k)||U(k)}),[k,U,x,F]),Object(n.useEffect)((function(){_||x||(Object.keys(M).length&&N.length>2?D(M):Object.keys(S).length?D(w):D(v))}),[v,M,N,j,x,S,w,_]);var B=Object(n.useCallback)((function(e,t){c(u===t&&"asc"===l?"desc":"asc"),m(t)}),[u,l]),H=Object(n.useCallback)((function(e){if(e.target.checked){var t=Object.values(P).map((function(e){return e.id}));b(t)}else b([])}),[P]),W=(Object(n.useCallback)((function(e,t){var a=f.indexOf(t),n=[];-1===a?n=n.concat(f,t):0===a?n=n.concat(f.slice(1)):a===f.length-1?n=n.concat(f.slice(0,-1)):a>0&&(n=n.concat(f.slice(0,a),f.slice(a+1))),b(n)}),[f]),Object(n.useCallback)((function(e,t){A(dt(t))}),[A])),V=Object(n.useCallback)((function(e){var t=e.target.value;O(parseInt(t,10)),A(dt(0))}),[A]),q=Object(n.useCallback)((function(t){return C[k]&&Object.keys(C[k].cohorts).length?r.a.createElement(He.a,{align:"left",className:e.dashedCell},r.a.createElement(Ge.a,{component:"div",className:e.enrollmentStatus},r.a.createElement(zn,{courses:C,selectedCohort:t.enrollments[k]&&t.enrollments[k].cohort.name||"",courseId:k,user:t}))):null}),[e.dashedCell,e.enrollmentStatus,C,k]),Y=Object(n.useCallback)((function(e){return-1!==f.indexOf(e)}),[f]),G=h-Math.min(h,Object.keys(P).length-T*h);return r.a.createElement("div",{className:e.root},_?r.a.createElement($a,null):x?r.a.createElement(or,null):r.a.createElement(n.Fragment,null,r.a.createElement(Kn,null),r.a.createElement(lr,{numSelected:f.length}),r.a.createElement(We.a,{className:e.tableContainer},r.a.createElement(Ge.a,{className:e.courseViewSelectorClass},r.a.createElement(Yn,{data:P}),C[k]&&Object.values(C[k].cohorts).length>0&&r.a.createElement(Rn,{courses:C,selectedEnrollments:v,selectedCourseId:k})),r.a.createElement(Ue.a,{className:e.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(nr,{classes:e,numSelected:f.length,order:l,orderBy:u,onSelectAllClick:H,onRequestSort:B,rowCount:Object.keys(P).length,courses:C,selectedCourseId:k,usersSelection:f,data:P}),I?r.a.createElement(Be.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(Object.values(P),function(e,t){return"desc"===e?function(e,a){return ar(e,a,t)}:function(e,a){return-ar(e,a,t)}}(l,u)).slice(T*h,T*h+h).map((function(t,a){var n=Y(t.id),l="enhanced-table-checkbox-".concat(a);return r.a.createElement(qe.a,{hover:!0,className:e.pointer,onClick:function(){return e=t.email,A(bt(e)),A(jt(0)),void A(vt(e));var e},role:"checkbox","aria-checked":n,tabIndex:-1,key:t.id,selected:n},r.a.createElement(He.a,{padding:"checkbox"},r.a.createElement(aa.a,{checked:n,inputProps:{"aria-labelledby":l}})),r.a.createElement(He.a,{component:"th",scope:"row",padding:"none"},t.is_active?"Active":"Never connected"),r.a.createElement(He.a,{align:"left"},r.a.createElement(Re.a,{variant:"subtitle2"},t.last_name),r.a.createElement(Re.a,{variant:"caption"},t.first_name)),r.a.createElement(He.a,{align:"left",id:l},r.a.createElement(Re.a,{variant:"subtitle2"},t.username),r.a.createElement(Re.a,{variant:"caption"},t.email)),r.a.createElement(He.a,{align:"left",className:e.dashedCell},r.a.createElement(Dn,{userData:t})),q(t))})),G>0&&r.a.createElement(qe.a,{style:{height:53*G}},r.a.createElement(He.a,{colSpan:6}))):r.a.createElement(Be.a,null,r.a.createElement(qe.a,{hover:!0,role:"checkbox",tabIndex:-1},r.a.createElement(He.a,{padding:"checkbox"}),r.a.createElement(He.a,null),r.a.createElement(He.a,{align:"left"}),r.a.createElement(He.a,{align:"left"}),r.a.createElement(He.a,{align:"left",className:e.dashedCell}))))),r.a.createElement(Wn.a,{rowsPerPageOptions:[10],component:"div",count:Object.keys(P).length,rowsPerPage:h,page:T,onChangePage:W,onChangeRowsPerPage:V})))},ir=function(){var e=Object(o.c)((function(e){return{isSmallApp:e.userManagement.isSmallApp}})).isSmallApp;return r.a.createElement(n.Fragment,null,e?r.a.createElement(tr,null):r.a.createElement(sr,null))},ur=Object(Ce.a)((function(e){return{recipientItem:{display:"inline-block",textTransform:"capitalize"},editor:{padding:"8px 16px",fontSize:"12px",fontWeight:700,marginBottom:2,color:e.palette.primary.main,textTransform:"uppercase"}}})),mr=function(e){var t=e.emailContent,a=e.recipient,l=e.cohort,c=ur(),s=Object(o.b)(),i=c.recipientItem,u=t.recipients,d=t.cohortsRecipients,p=Object(n.useState)(!1),f=Object(Ze.a)(p,2),b=f[0],g=f[1],E=Object(n.useCallback)((function(e,t){var a=e.target.name,n=[],r=(n=l?Object(m.a)(d):Object(m.a)(u)).indexOf(t);-1!==r?n.splice(r,1):n.push(t),s(Ot(a,n))}),[u,s,l,d]);return Object(n.useEffect)((function(){l?-1!==d.indexOf(a)?g(!0):g(!1):-1!==u.indexOf(a)?g(!0):g(!1)}),[d,u,a,l]),r.a.createElement(ke.a,{key:a,item:!0},r.a.createElement(aa.a,{color:"primary",name:l?"cohortsRecipients":"recipients",checked:b,onChange:function(e){return E(e,a)}}),r.a.createElement(Re.a,{className:i},a))},dr=function(e){var t=e.emailContent,a=e.cohorts,n=Object(o.c)((function(e){return{trad:e.translations.values}})).trad,l=ur().editor,c=Object.keys(a);return r.a.createElement(ke.a,{item:!0,xs:10},r.a.createElement(Re.a,{variant:"h6",component:"div",className:l},n.recipient),r.a.createElement(ke.a,{container:!0,spacing:3},["myself","staff","all"].map((function(e){return r.a.createElement(mr,{key:e,emailContent:t,recipient:e})})),c.map((function(e){return r.a.createElement(mr,{key:e,emailContent:t,recipient:e,cohort:!0})}))))},pr=Object(Ce.a)((function(e){return{recipientItem:{display:"inline-block",textTransform:"capitalize"},sendButton:{width:"150px",margin:"10px 8px"}}})),fr=function(e){var t=e.emailContent,a=e.toggleModal,l=Object(o.c)((function(e){return{trad:e.translations.values}})).trad,c=pr().sendButton,s=t.message,i=t.recipients,u=t.subject,m=t.cohortsRecipients,d=Object(n.useCallback)((function(){var e=s.length>0,t=u.length>0,a=!1;return(m.length>0||i.length>0)&&(a=!0),!e||!t||!a}),[s.length,m,i,u]);return r.a.createElement(ke.a,{item:!0,xs:2},r.a.createElement(Ae.a,{className:c,disabled:d(),variant:"contained",color:"primary",endIcon:r.a.createElement(Sn.a,null),onClick:function(){return a()}},l.send))},br=Object(Ce.a)((function(e){return{editor:{padding:"8px 16px",fontSize:"12px",fontWeight:700,marginBottom:2,color:e.palette.primary.main,textTransform:"uppercase"}}})),gr=function(e){var t=e.courseName,a=e.setEmailContent,l=e.subject,c=Object(o.c)((function(e){return{trad:e.translations.values}})).trad,s=br().editor,i=Object(o.b)(),u=Object(n.useCallback)((function(e){var t=e.target,n=t.name,r=t.value;i(a(n,r))}),[i,a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Re.a,{variant:"h6",component:"div",className:s},c.subject),r.a.createElement(ia.a,{style:{margin:8,padding:"8px 0"},fullWidth:!0,rowsMax:1,name:"subject",value:l,placeholder:t?"Ex: About your cursus":"Ex: About ".concat(t),onChange:u}))},Er=a(169),hr=Object(Ce.a)((function(e){return{editor:{padding:"8px 16px",fontSize:"12px",fontWeight:700,marginBottom:2,color:e.palette.primary.main,textTransform:"uppercase"}}})),Or=function(e){var t=e.setEmailContent,a=e.message,l=hr().editor,c=Object(o.b)(),s=Object(n.useCallback)((function(e){c(t("message",e))}),[c,t]);return r.a.createElement(n.Fragment,null,r.a.createElement(Re.a,{variant:"h6",component:"div",className:l},"Message :"),r.a.createElement(Er.a,{value:a,initialValue:"<p>Edit your content here</p>",name:"message",init:{height:400,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help"},onEditorChange:s}))},yr=a(174),jr=a(226),vr=Object(Ce.a)((function(e){return{sendButton:{width:"150px",margin:"10px 8px"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),xr=function(e){var t=e.openModal,a=e.toggleModal,n=e.handleSendEmail,l=Object(o.c)((function(e){return{trad:e.translations.values}})).trad,c=vr(),s=c.sendButton,i=c.paper,u=c.modal;return r.a.createElement(yr.a,{className:u,open:t,onClose:a,closeAfterTransition:!0,BackdropComponent:jr.a,BackdropProps:{timeout:500}},r.a.createElement(ke.a,{className:i},r.a.createElement(Re.a,{variant:"h6",component:"div",gutterBottom:!0},l.confirmation),r.a.createElement(Re.a,{variant:"subtitle2",component:"div",gutterBottom:!0},l.send_email_validation),r.a.createElement(ke.a,{item:!0},r.a.createElement(Ae.a,{className:s,variant:"contained",color:"primary",onClick:n},l.confirm),r.a.createElement(Ae.a,{className:s,variant:"contained",color:"primary",onClick:a},l.cancel))))},Cr=Object(Ce.a)((function(e){return{historyButton:{width:120}}})),_r=function(e){var t=e.getDataHistory,a=e.text,n=Cr().historyButton;return r.a.createElement(Ae.a,{className:n,variant:"contained",color:"primary",onClick:function(){return t()}},a)},kr=Object(Ce.a)((function(e){return{root:{margin:"25px auto",width:"95%",borderTop:"1px solid gainsboro",paddingTop:25},container:{width:"100%"},headCells:{fontWeight:700,maxWidth:"20%",backgroundColor:"gainsboro",height:"30px !important",overflowWrap:"unset"},historyType:{fontWeight:500,fontSize:20},historyBlock:{marginBottom:20}}})),wr=function(e){var t=e.dataSource,a=kr(),l=Object(n.useState)(0),c=Object(Ze.a)(l,2),s=c[0],i=c[1],u=Object(n.useState)(10),p=Object(Ze.a)(u,2),f=p[0],b=p[1],g=Object(n.useState)([]),E=Object(Ze.a)(g,2),h=E[0],O=E[1],y=Object(n.useState)([]),j=Object(Ze.a)(y,2),v=j[0],x=j[1],C=Object(n.useState)(!1),_=Object(Ze.a)(C,2),k=_[0],w=_[1],S=Object(o.c)((function(e){return{selectedCourse:e.userManagement.selectedCourse,emailsHistory:e.userManagement.emailsHistory,tasksHistory:e.userManagement.tasksHistory,historySuccess:e.userManagement.historySuccess}})),T=S.selectedCourse,M=S.emailsHistory,N=S.tasksHistory,I=S.historySuccess,F=Object(o.b)(),R=Object(n.useCallback)((function(){var e;"emailsHistory"===t?F((e=T,function(){var t=Object(ot.a)(ct.a.mark((function t(a){var n,r,l,c,o,s,i,u,m;return ct.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],r={},l=window.props.endpoints.fetchEmailsHistory.replace("<courseId>",e),c={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken}},t.next=7,fetch(l,c);case 7:return o=t.sent,t.next=10,o.json();case 10:s=t.sent,i=o.status,s.emails.forEach((function(e){var t={};delete(t=Object(d.a)(Object(d.a)({},e),e.email)).email,n.push(t)})),200===i&&(u=!1,n.length&&(u=!0),r={courseId:e,data:n,historySuccess:u}),t.next=20;break;case 16:m=!1,(n=[{id:"1048",subject:"La sixi\xe8me semaine du MOOC Connexions citoyennes est en ligne !",number_sent:"3668 envoy\xe9s",requester:"YanisB_Staff",sent_to:["Myself","Staff and instructors","All students"],created:"24 nov 2020, \xe0 09:00 UTC"}]).length&&(m=!0),r={courseId:e,data:n,historySuccess:m};case 20:a({type:B,payload:r});case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):"tasksHistory"===t&&F(function(e){return function(){var t=Object(ot.a)(ct.a.mark((function t(a){var n,r,l,c,o,s,i,u,d;return ct.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],r={},l=window.props.endpoints.fetchTasksHistory.replace("<courseId>",e),c={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken}},t.next=7,fetch(l,c);case 7:return o=t.sent,t.next=10,o.json();case 10:s=t.sent,i=o.status,n=Object(m.a)(s.tasks),200===i&&(u=!1,n.length&&(u=!0),r={courseId:e,data:n,historySuccess:u}),t.next=20;break;case 16:d=!1,(n=[]).length&&(d=!0),r={courseId:e,data:n,historySuccess:d};case 20:a({type:H,payload:r});case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(T))}),[F,T,t]);Object(n.useEffect)((function(){"emailsHistory"===t?M&&O(M):"tasksHistory"===t&&N&&O(N)}),[O,M,N,t]),Object(n.useEffect)((function(){!I&&w(!0)}),[I]),Object(n.useEffect)((function(){var e=[];"emailsHistory"===t?e=[{id:"subject",label:"Subject"},{id:"requester",label:"Requester"},{id:"sent_to",label:"Recipients"},{id:"created",label:"Date"},{id:"number_sent",label:"Number"}]:"tasksHistory"===t&&(e=[{id:"task_type",label:"Type"},{id:"task_input",label:"Input"},{id:"task_id",label:"Id"},{id:"requester",label:"Sender"},{id:"created",label:"Date"},{id:"duration_sec",label:"Dur. (sec)"},{id:"task_state",label:"State"},{id:"status",label:"Status"},{id:"task_message",label:"Progression"}]),x(e)}),[t]);var L=Object(n.useCallback)((function(e,t){i(t)}),[]),P=Object(n.useCallback)((function(e){b(+e.target.value),i(0)}),[]),D=Object(n.useCallback)((function(){return h.length?"Refresh":"Display"}),[h]);return r.a.createElement(ke.a,{className:a.root},r.a.createElement(ke.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",className:a.historyBlock},r.a.createElement(Ge.a,{component:"div",className:a.historyType},"emailsHistory"===t?"Emails history":"Tasks history"),r.a.createElement(_r,{getDataHistory:R,text:D()})),r.a.createElement(Pa,{open:k,setOpenSnack:w,snackData:{message:"emailsHistory"===t?"No emails have been sent yet":"No tasks have been executed yet",severity:"warning"}}),h.length?r.a.createElement(n.Fragment,null,r.a.createElement(We.a,{className:a.container},r.a.createElement(Ue.a,null,r.a.createElement(Ve.a,null,r.a.createElement(qe.a,null,v.map((function(e){return r.a.createElement(He.a,{className:a.headCells,key:e.id,size:"medium"},e.label)})))),r.a.createElement(Be.a,null,h.slice(s*f,s*f+f).map((function(e){return r.a.createElement(qe.a,{hover:!0,role:"checkbox",tabIndex:-1,key:e.id?e.id:e.task_id},v.map((function(t,a){return r.a.createElement(He.a,{key:a},e[t.id])})))}))))),r.a.createElement(Wn.a,{rowsPerPageOptions:[10,25,100],component:"div",count:h.length,rowsPerPage:f,page:s,onChangePage:L,onChangeRowsPerPage:P})):null)},Sr=function(){var e=Object(o.c)((function(e){return{selectedCourse:e.userManagement.selectedCourse,globalMode:e.userManagement.displayGlobalMode,courses:e.userManagement.courses,isLoading:e.userManagement.isLoading,emailContent:e.userManagement.emailContent}})),t=e.globalMode,a=e.isLoading,l=e.courses,c=e.selectedCourse,s=e.emailContent,i=Object(o.b)(),u=Object(n.useState)(!1),m=Object(Ze.a)(u,2),p=m[0],f=m[1],b=Object(n.useCallback)((function(){f(!p)}),[p]),g=Object(n.useCallback)((function(){var e=[];e=t?Object.keys(l):[c],i(function(e,t,a,n){return function(){var r=Object(ot.a)(ct.a.mark((function r(l){var c,o,s,i,u,m;return ct.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=t.recipients,o=t.cohortsRecipients,s=t.subject,i=t.message,u=200,!n){r.next=8;break}return r.next=6,e.forEach(function(){var e=Object(ot.a)(ct.a.mark((function e(t){var n,r,l,m,d;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("action","send"),n.append("subject",s),n.append("message",i),r=[],o.forEach((function(e){Object.values(a[t].cohorts).indexOf(-1!==e)&&r.push("cohort:".concat(e))})),n.append("send_to",JSON.stringify(c.concat(r))),l=window.props.endpoints.sendEmail.replace("<courseId>",t),m={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken},contentType:!1,processData:!1,body:n},e.next=11,fetch(l,m);case 11:d=e.sent,u=d.status;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:r.next=10;break;case 8:return r.next=10,e.forEach(function(){var e=Object(ot.a)(ct.a.mark((function e(t){var a,n,r,l,m;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],o.forEach((function(e){a.push("cohort:".concat(e))})),(n=new FormData).append("action","send"),n.append("subject",s),n.append("message",i),n.append("send_to",JSON.stringify(c.concat(a))),r=window.props.endpoints.sendEmail.replace("<courseId>",t),l={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken},contentType:!1,processData:!1,body:n},e.next=11,fetch(r,l);case 11:m=e.sent,u=m.status;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:m={recipients:[],cohortsRecipients:[],subject:"",message:""},200===u&&l({type:D,payload:m});case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(e,s,l,t)),b()}),[i,b,l,s,t,c]),E=Object(n.useCallback)((function(){var e={};if(t){var a=Object.values(l),n={};return a.forEach((function(t){e=Object(d.a)(Object(d.a)({},e),t.cohorts)})),Object.entries(e).forEach((function(e){n.hasOwnProperty(e[1])?n[e[1]].push(e[0]):n[e[1]]=[e[0]]})),Object.entries(n).forEach((function(e){e[1].length<2&&delete n[e[0]]})),n}e=l[c].cohorts;var r={};return Object.entries(e).forEach((function(e){r[e[1]]=e[0]})),r}),[l,t,c]);return a?r.a.createElement($a,null):r.a.createElement(n.Fragment,null,r.a.createElement(Kn,null),r.a.createElement(ke.a,{container:!0},r.a.createElement(dr,{emailContent:s,cohorts:E()}),r.a.createElement(fr,{emailContent:s,toggleModal:b})),r.a.createElement(gr,{courseName:!t&&l[c].display_name,setEmailContent:Ot,subject:s.subject}),r.a.createElement(Or,{setEmailContent:Ot,message:s.message}),r.a.createElement(xr,{openModal:p,toggleModal:b,handleSendEmail:g}),!t&&r.a.createElement(wr,{dataSource:"emailsHistory"}),!t&&r.a.createElement(wr,{dataSource:"tasksHistory"}))},Tr=Object(Ce.a)({table:{minWidth:650},requireTrue:{color:"red",fontWeight:"bold"},requireFalse:{color:"black",fontWeight:"bold"}}),Mr=function(){var e=Object(o.c)((function(e){return{enrollFieldArray:e.userManagement.enrollFieldArray,registerFieldsValue:e.userManagement.registerFieldsValue}})),t=e.enrollFieldArray,a=e.registerFieldsValue,l=Tr(),c=t.data,s=Object.values(a.register_fields).filter((function(e){return!e.undisplay}));return r.a.createElement(We.a,{component:Ye.a},r.a.createElement(Ue.a,{className:l.table,"aria-label":"simple table"},r.a.createElement(Ve.a,null,r.a.createElement(qe.a,null,s.map((function(e,t){return r.a.createElement(n.Fragment,{key:t},!0===e.required?r.a.createElement(He.a,{key:t,className:l.requireTrue}," ",e.label,"*"," "):r.a.createElement(He.a,{key:t,className:l.requireFalse}," ",e.name," "))})))),r.a.createElement(Be.a,null,c.map((function(e,t){return r.a.createElement(qe.a,{key:t},e.map((function(e,t){return r.a.createElement(He.a,{key:t,component:"th",scope:"row"},e)})))})))))},Nr=a(69),Ir=Object(Ce.a)((function(e){return{button:{marginLeft:"10px"}}})),Fr=function(){var e=Ir(),t=Object(o.c)((function(e){return{enrollFieldValue:e.userManagement.enrollFieldValue,trad:e.translations.values}})),a=t.enrollFieldValue,n=t.trad,l=Object(o.b)();return r.a.createElement(Ae.a,{className:e.button,variant:"contained",color:"primary",onClick:function(){!function(){var e=a,t=Object(Nr.b)(e);l(ft(t))}(),l(pt())}},n.check_data)},Rr=Object(Ce.a)((function(e){return{button:{margin:"20px"},input:{width:"99%"},dataMissing:{color:"red",textAlign:"center",marginTop:"10px"},wrongEmail:{color:"red",textAlign:"center",marginTop:"10px"},informations:{textAlign:"center",marginTop:"10px"},importSuccess:{color:"green",textAlign:"center",marginTop:"10px"},formControl:{margin:e.spacing(1),minWidth:120},selectorContainer:{display:"flex",alignItems:"baseline"}}})),Lr=function(){var e=Object(o.c)((function(e){return{enrollFieldValue:e.userManagement.enrollFieldValue,selectedCourse:e.userManagement.selectedCourse,globalMode:e.userManagement.displayGlobalMode,isLoading:e.userManagement.isLoading,isTableOpened:e.userManagement.isTableOpened,enrollFieldArray:e.userManagement.enrollFieldArray,registerFieldsValue:e.userManagement.registerFieldsValue,importUsersSuccess:e.userManagement.importUsersSuccess,selectedCohortForImport:e.userManagement.selectedCohortForImport,trad:e.translations.values}})),t=e.enrollFieldValue,a=e.selectedCourse,l=e.globalMode,c=e.isLoading,s=e.isTableOpened,i=e.enrollFieldArray,u=e.registerFieldsValue,m=e.importUsersSuccess,d=e.selectedCohortForImport,p=e.trad,f=Object(o.b)(),b=Rr(),g=function(e){f(function(e){return{type:k,payload:{inputValue:e}}}(e))},E=Object(n.useCallback)(Object(ot.a)(ct.a.mark((function e(){return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(gt());case 2:case"end":return e.stop()}}),e)}))),[f]);Object(n.useEffect)((function(){E()}),[E]);var h,O,y,j;if(void 0!==u.register_fields){var v=(h=Object.values(u.register_fields)).filter((function(e){return!e.undisplay}));O=v.map((function(e){return e.name})),j=(y=v.map((function(e){return e.label}))).toString()}var x,C,_=i.data;_&&(x=_.map((function(e){var t={};return e.forEach((function(e,a){t[O[a]]=e})),t})),C=_.map((function(e){var t={};return e.forEach((function(e,a){t[y[a]]=e})),t})));var w,S=!1;h&&(w=h.filter((function(e){return!0===e.required}))),w&&x&&w.forEach((function(e){var t=e.name;x.forEach((function(e){e[t]||(S=!0)}))}));var T,M=[];x&&x.forEach((function(e){var t;t=e.email,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t)||M.push(e.email)})),h&&(T=h.filter((function(e){return e.options})));var N={};T&&T.map((function(e){return N[e.label]=e.options}));var I=[],F=[];C&&C.forEach((function(e){console.log(e),Object.keys(e).filter((function(e){return e in N})).forEach((function(t){if(console.log(t),!N[t].find((function(a){return a.name===e[t]}))&&-1===F.indexOf(t)){var a={};console.log(y),a.errorMessage=p.caution_field+t+p.not_valid+e.Email+"'.",a.selector=t,a.user=e.Email,a.wrongData=e[t],I.push(a)}}))}));var R=!1;if(_){var L=_.length-1,P=Object.values(_);P[L]&&P[L].length<2&&0===P[L][0].length&&(R=!0,i.data.pop())}return c?r.a.createElement($a,null):l?r.a.createElement(n.Fragment,null):r.a.createElement(n.Fragment,null,r.a.createElement(Re.a,null,p.input_field_information_part_one),r.a.createElement(Re.a,null,p.input_field_information_part_two),r.a.createElement(Re.a,null,p.input_field_information_part_three),r.a.createElement(Re.a,null,j),r.a.createElement(Re.a,null,p.input_field_information_part_five),r.a.createElement(ia.a,{className:b.input,id:"filled-full-width",label:p.label,style:{margin:8},placeholder:j,fullWidth:!0,value:t,multiline:!0,rowsMax:10,margin:"normal",InputLabelProps:{shrink:!0},onChange:function(e){g(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){var a=t,n=Object(Nr.b)(a);f(ft(n)),f(pt())}}}),r.a.createElement(ke.a,{container:!0,direction:"row",alignItems:"center"},r.a.createElement(ke.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline"},r.a.createElement(Fr,null)),s&&r.a.createElement(Mr,null)),r.a.createElement(ke.a,null,S&&r.a.createElement(Re.a,{className:b.dataMissing},p.data_is_missing),R&&r.a.createElement(Re.a,{className:b.dataMissing},p.last_line_is_empty),M.length>0&&!R&&M.map((function(e,t){return r.a.createElement(Re.a,{key:"emailError"+t,className:b.wrongEmail},e," ",p.wrong_mail)})),I.length>0&&I.map((function(e,t){return r.a.createElement(n.Fragment,{key:t},r.a.createElement(ke.a,{className:b.selectorContainer},r.a.createElement(Re.a,{key:"incorrectData"+t,className:b.wrongEmail},e.errorMessage),r.a.createElement(la.a,{key:"dataSelector"+t,className:b.formControl},r.a.createElement(Nn.a,{key:"dataSelectorInput"+t,htmlFor:"age-native-simple"},e.selector),r.a.createElement(ca.a,{key:"dataSelectorInputIndex"+t,native:!0,inputProps:{name:"label",id:"label-native-simple"},onChange:function(t){return function(e,t,a,n){_&&_.forEach((function(t){if(console.log(t),t.includes(e)){var r={};r.indexRow=_.indexOf(t),r.indexWrongData=n,r.dataToReplace=a,f(xt(r))}}))}(e.user,e.wrongData,t.target.value,y.indexOf(e.selector))}},r.a.createElement("option",{key:"option"+t,index:"option-","aria-label":"None",value:""}),N[e.selector].map((function(e){return r.a.createElement("option",{key:"-"+e.value,index:"-"+e.value,value:e.name},e.name)}))))))}))),m&&r.a.createElement(ke.a,null,r.a.createElement(Re.a,{className:b.importSuccess},p.request_send),r.a.createElement(Re.a,{className:b.importSuccess},p.users_on_the_way_to_be_enrolled),r.a.createElement(Re.a,{className:b.importSuccess},p.email_will_be_sent_soon)),r.a.createElement(ke.a,{container:!0,direction:"row",justify:"center"},i.data&&i.data.length>0&&!S&&0===M.length&&0===I.length?r.a.createElement(Ae.a,{variant:"contained",color:"primary",component:"span",className:b.button,onClick:function(){f(yt(x,a,d))}},p.import):r.a.createElement(Ae.a,{disabled:!0,variant:"contained",color:"primary",component:"span",className:b.button},p.import),r.a.createElement("label",{htmlFor:"contained-button-file"})))},Pr=Object(Ce.a)((function(e){return{button:{margin:"10px"}}})),Dr=r.a.createRef(),Ar=function(){var e=Pr(),t=Object(o.c)((function(e){return{trad:e.translations.values}})).trad,a=Object(o.b)(),n=function(e){Dr.current&&Dr.current.open(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nr.a,{onFileLoad:function(e){e=e.slice(1),console.log("---------------------------"),console.log(e),console.log("---------------------------");var t={};t.data=e.map((function(e){return e.data})),a({type:z,payload:t}),a(pt())},onError:function(e,t,a,n){console.log("---------------------------"),console.log(e),console.log("---------------------------")},ref:Dr,noClick:!0,noDrag:!0},(function(a){var l=a.file;return r.a.createElement("aside",{style:{display:"flex",flexDirection:"row",marginBottom:10,alignItems:"baseline"}},r.a.createElement(Ae.a,{className:e.button,onClick:n,variant:"contained",color:"primary",component:"span"},t.browse_file),r.a.createElement(Re.a,null,l&&l.name))})))},Ur=a(165),Br=Object(Ce.a)((function(e){return{button:{margin:"20px"},input:{width:"99%"},dataMissing:{color:"red",textAlign:"center",marginTop:"10px"},informations:{textAlign:"center",marginTop:"10px"},importSuccess:{color:"green",textAlign:"center",marginTop:"10px"},infoText:{minWidth:"50%",textAlign:"center"},csvLink:{"&:hover":{color:"currentColor !important"}},wrongEmail:{color:"red",textAlign:"center",marginTop:"10px"},formControl:{margin:e.spacing(1),minWidth:120},requiredField:{color:"red",border:"1px solid black",margin:"1em",padding:"10px"},unrequiredField:{color:"black",border:"1px solid black",margin:"1em",padding:"5px"},fieldsContainer:{display:"flex",justifyContent:"center",flexDirection:"row",margin:"1em"},table:{borderCollapse:"collapse",width:"100%"},selectorContainer:{display:"flex",alignItems:"baseline"}}})),Hr=function(){var e=Object(o.c)((function(e){return{selectedCourse:e.userManagement.selectedCourse,globalMode:e.userManagement.displayGlobalMode,isLoading:e.userManagement.isLoading,isTableOpened:e.userManagement.isTableOpened,enrollFieldArray:e.userManagement.enrollFieldArray,registerFieldsValue:e.userManagement.registerFieldsValue,importUsersSuccess:e.userManagement.importUsersSuccess,selectedCohortForImport:e.userManagement.selectedCohortForImport,trad:e.translations.values}})),t=e.selectedCourse,a=e.globalMode,l=e.isLoading,c=e.isTableOpened,s=e.enrollFieldArray,i=e.registerFieldsValue,u=e.importUsersSuccess,m=e.selectedCohortForImport,d=e.trad,p=Object(o.b)(),f=Br(),b=Object(n.useCallback)(Object(ot.a)(ct.a.mark((function e(){return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(gt());case 2:case"end":return e.stop()}}),e)}))),[p]);Object(n.useEffect)((function(){b()}),[b]);var g,E,h,O=[];if(i&&i.register_fields){var y=i.register_fields.map((function(e){return e.label}));O.push(y)}if(void 0!==i.register_fields){var j=(g=Object.values(i.register_fields)).filter((function(e){return!e.undisplay}));E=j.map((function(e){return e.name})),h=j.map((function(e){return e.label}))}var v,x,C=s.data;C&&(v=C.map((function(e){var t={};return e.forEach((function(e,a){t[E[a]]=e})),t})),x=C.map((function(e){var t={};return e.forEach((function(e,a){t[h[a]]=e})),t})));var _,k=!1;g&&(_=g.filter((function(e){return!0===e.required}))),_&&v&&_.forEach((function(e){var t=e.name;v.forEach((function(e){e[t]||(k=!0)}))}));var w,S=[];v&&v.forEach((function(e){var t;t=e.email,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t)||S.push(e.email)})),g&&(w=g.filter((function(e){return e.options})));var T={};w&&w.map((function(e){return T[e.label]=e.options})),console.log(T);var M=[],N=[];x&&x.forEach((function(e){Object.keys(e).filter((function(e){return e in T})).forEach((function(t){if(!T[t].find((function(a){return a.name===e[t]}))&&-1===N.indexOf(t)){var a={};a.errorMessage=d.caution_field+t+d.not_valid+e.Email+"'.",a.selector=t,a.user=e.Email,a.wrongData=e[t],M.push(a)}}))}));var I=!1;if(C){var F=C.length-1,R=Object.values(C);R[F]&&R[F].length<2&&0===R[F][0].length&&(I=!0,s.data.pop())}return l?r.a.createElement($a,null):a?r.a.createElement(n.Fragment,null):r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,null,r.a.createElement(Re.a,{className:f.infoText},d.import_csv_information_part_one),r.a.createElement(Re.a,{className:f.infoText},d.import_csv_information_part_two),r.a.createElement(ke.a,{className:f.fieldsContainer},r.a.createElement("table",{cellPadding:10,className:f.table},r.a.createElement("tbody",null,r.a.createElement("tr",{className:f.table},g&&g.map((function(e,t){return!0===e.required?r.a.createElement("th",{key:t,className:f.requiredField},e.label):r.a.createElement("th",{key:t,className:f.unrequiredField},e.label)})))))),r.a.createElement(Re.a,{className:f.infoText},d.import_csv_information_part_three),r.a.createElement(Re.a,{className:f.infoText},d.import_csv_information_part_four),r.a.createElement(Re.a,{className:f.infoText},d.import_csv_information_part_five),r.a.createElement(Re.a,{className:f.infoText},d.import_csv_information_part_six),r.a.createElement(Re.a,{className:f.infoText},d.import_csv_information_part_seven),r.a.createElement(Re.a,{className:f.infoText},r.a.createElement(Ur.CSVLink,{className:f.csvLink,data:O,separator:";"},"(CSV)")),r.a.createElement(Re.a,{className:f.infoText},d.import_csv_information_part_height)),r.a.createElement(ke.a,{container:!0,direction:"row",alignItems:"center"},r.a.createElement(ke.a,{container:!0,direction:"row",justify:"space-between",alignItems:"baseline"},r.a.createElement(Ar,null)),c&&r.a.createElement(Mr,null)),u&&r.a.createElement(ke.a,null,r.a.createElement(Re.a,{className:f.importSuccess},d.request_send),r.a.createElement(Re.a,{className:f.importSuccess},d.users_on_the_way_to_be_enrolled),r.a.createElement(Re.a,{className:f.importSuccess},d.email_will_be_sent_soon)),r.a.createElement(ke.a,null,k&&r.a.createElement(Re.a,{className:f.dataMissing},d.data_is_missing),I&&r.a.createElement(Re.a,{className:f.dataMissing},d.last_line_is_empty),S.length>0&&!I&&S.map((function(e,t){return r.a.createElement(Re.a,{key:"emailError"+t,className:f.wrongEmail},e," ",d.wrong_mail)})),M.length>0&&M.map((function(e,t){return r.a.createElement(n.Fragment,{key:t},r.a.createElement(ke.a,{className:f.selectorContainer},r.a.createElement(Re.a,{key:"incorrectData"+t,className:f.wrongEmail},e.errorMessage),r.a.createElement(la.a,{key:"dataSelector"+t,className:f.formControl},r.a.createElement(Nn.a,{key:"dataSelectorInput"+t,htmlFor:"age-native-simple"},e.selector),r.a.createElement(ca.a,{key:"dataSelectorInputIndex"+t,native:!0,inputProps:{name:"label",id:"label-native-simple"},onChange:function(t){return function(e,t,a,n){C&&C.forEach((function(t){if(t.includes(e)){var r={};r.indexRow=C.indexOf(t),r.indexWrongData=n,r.dataToReplace=a,p(xt(r))}}))}(e.user,e.wrongData,t.target.value,h.indexOf(e.selector))}},r.a.createElement("option",{key:"option"+t,index:"option-"+e.selector,"aria-label":"None",value:""}),T[e.selector].map((function(t){return r.a.createElement("option",{key:e.selector+"-"+t.value,index:e.selector+"-"+t.value,value:t.name},t.name)}))))))}))),r.a.createElement(ke.a,{container:!0,direction:"row",justify:"center"},s.data&&s.data.length>0&&!k&&0===S.length&&0===M.length?r.a.createElement(Ae.a,{variant:"contained",color:"primary",component:"span",className:f.button,onClick:function(){p(yt(v,t,m))}},d.import):r.a.createElement(Ae.a,{disabled:!0,variant:"contained",color:"primary",component:"span",className:f.button},d.import),r.a.createElement("label",{htmlFor:"contained-button-file"})))},Wr=Object(Ce.a)((function(e){return{button:{margin:"20px",padding:"6px 40px"}}})),Vr=function(){var e=Object(o.c)((function(e){return{globalMode:e.userManagement.displayGlobalMode,isLoading:e.userManagement.isLoading,selectedCohortForImport:e.userManagement.selectedCohortForImport,trad:e.translations.values,importManualMode:e.userManagement.importManualMode,importUploadMode:e.userManagement.importUploadMode}})),t=e.globalMode,a=e.isLoading,l=e.trad,c=e.importManualMode,s=e.importUploadMode,i=Object(o.b)(),u=Wr();return a?r.a.createElement($a,null):t?r.a.createElement(n.Fragment,null):r.a.createElement(n.Fragment,null,r.a.createElement(Kn,null),r.a.createElement(ke.a,{container:!0,direction:"row",justify:"center"},r.a.createElement(Ae.a,{variant:"contained",color:"primary",component:"span",className:u.button,onClick:function(){i({type:X})}},l.input_manually),r.a.createElement(Ae.a,{variant:"contained",color:"primary",component:"span",className:u.button,onClick:function(){i({type:K})}},l.import_excel_or_csv),c&&r.a.createElement(Lr,null),s&&r.a.createElement(Hr,null)))},qr=Object(Ce.a)((function(e){return{nav:{backgroundColor:e.palette.background.main,paddingBottom:"15px"}}})),Yr=function(){var e=qr(),t=Object(o.c)((function(e){return{trad:e.translations.values,configuration:e.configuration.values,isSmallApp:e.userManagement.isSmallApp,displayGlobalMode:e.userManagement.displayGlobalMode,tab:e.userManagement.tab}})),a=t.trad,l=t.configuration,c=t.isSmallApp,s=t.displayGlobalMode,i=t.tab,u=Object(o.b)(),m=Object(n.useCallback)((function(e,t){u({type:Y,payload:t})}),[u]),d=Object(n.useCallback)(Object(ot.a)(ct.a.mark((function e(){return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(function(){var e=Object(ot.a)(ct.a.mark((function e(t){var a,n,r,l;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n=window.props.endpoints.fetchEnrollments,r={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},e.next=6,fetch(n,r);case 6:return l=e.sent,e.next=9,l.json();case 9:a=e.sent,e.next=13;break;case 12:a=window.props;case 13:t({type:b,payload:a});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),[u]),p=Object(n.useCallback)(Object(ot.a)(ct.a.mark((function e(){return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(function(){var e=Object(ot.a)(ct.a.mark((function e(t){var a,n,r,l;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n=window.props.endpoints.fetchCoursesList,r={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},e.next=6,fetch(n,r);case 6:return l=e.sent,e.next=9,l.json();case 9:a=e.sent,e.next=13;break;case 12:a=window.props;case 13:t({type:W,payload:a});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),[u]),f=Object(n.useCallback)(Object(ot.a)(ct.a.mark((function e(){return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(function(){var e=Object(ot.a)(ct.a.mark((function e(t){var a,n,r,l;return ct.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n=window.props.endpoints.getCourseEnrollmentsCount,r={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}},e.next=6,fetch(n,r);case 6:return l=e.sent,e.next=9,l.json();case 9:a=e.sent,e.next=13;break;case 12:a=window.props;case 13:a.count>5e3?t({type:q,payload:!1}):t({type:q,payload:!0});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),[u]);Object(n.useEffect)((function(){f()}),[f]),Object(n.useEffect)((function(){void 0!==c&&(c?d():p())}),[c,p,d]);var g=[a.main];return l&&l.DISPLAY_STATUS?(l.DISPLAY_STATUS.DISPLAY_VIEW_ENROLLMENT&&g.push(a.view_enrollment),l.DISPLAY_STATUS.DISPLAY_IMPORT&&g.push(a.import),l.DISPLAY_STATUS.DISPLAY_SEND_MAIL&&g.push(a.send_mail)):g=[a.main,a.view_enrollment,a.import,a.send_mail],r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:e.nav},r.a.createElement(ln,{className:e.nav,value:i,handleChangeTab:m,tabsList:!c&&s?[a.main]:c&&s?[a.main,a.view_enrollment]:g})),r.a.createElement(Me,{value:i,index:g.indexOf(a.main)},r.a.createElement(_n,null)),r.a.createElement(Me,{value:i,index:g.indexOf(a.view_enrollment)},r.a.createElement(ir,null)),r.a.createElement(Me,{value:i,index:g.indexOf(a.import)},r.a.createElement(Vr,null)),r.a.createElement(Me,{value:i,index:g.indexOf(a.send_mail)},r.a.createElement(Sr,null)))},Gr=Object(Ce.a)((function(e){return{scrollablePaper:{margin:"20px 0px 20px 0px",padding:"10px",maxHeight:"80vh",overflow:"auto",direction:"rtl"},paper:{margin:"20px 10px"},container:{width:"95%"},closedButton:{display:"flex",flexDirection:"row",height:"50px"},closedIcon:{}}})),zr=function(){var e=Gr(),t=Object(o.c)((function(e){return{courses:e.userManagement.courses}})).courses,a=Object(n.useState)(!0),l=Object(Ze.a)(a,2),c=l[0],s=l[1],i=function(){s(!c)};return r.a.createElement(ke.a,{container:!0},c?r.a.createElement(n.Fragment,null,r.a.createElement(ke.a,{item:!0,xs:4},r.a.createElement(Ye.a,{variant:"outlined",className:e.scrollablePaper},r.a.createElement(tn,{courses:t,isOpened:c,handleClick:i})))):r.a.createElement(n.Fragment,null,r.a.createElement(It.a,{"aria-label":"hidden",onClick:i,className:e.closedButton},r.a.createElement(qa.a,{className:e.closedIcon}))),c?r.a.createElement(ke.a,{item:!0,xs:8,className:e.container},r.a.createElement(Ye.a,{variant:"outlined",className:e.paper},r.a.createElement(Yr,null))):r.a.createElement(ke.a,{className:e.container},r.a.createElement(Ye.a,{variant:"outlined",className:e.paper},r.a.createElement(Yr,null))))},Xr=a(296),Kr=Object(Ce.a)((function(e){return{root:{width:"100%"},instruction:{borderRadius:15,marginTop:100,marginBottom:50,backgroundColor:"white",fontSize:15,fontWeight:"bold",padding:30,textAlign:"center"},list:{textAlign:"left",marginLeft:"23%",marginTop:30},dataArea:{backgroundColor:"white",padding:30,borderRadius:15},centered:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:40},col1:{display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:20},col2:{display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:20},input:{backgroundColor:"white",height:40,margin:30,marginLeft:0,borderRadius:5,padding:10},fileSpan:{borderColor:"black",borderStyle:"solid",borderWidth:1,borderRadius:5,padding:5,marginLeft:15,width:250,textAlign:"center"},browseArea:{display:"flex",justifyContent:"center",alignItems:"center"},submit:{marginTop:40,width:"100%"},download:{marginBottom:45,color:"#2C9CDB",textAlign:"center",borderRadius:3,fontSize:"1.5rem",fontWeight:"bold"},hidden:{display:"none"}}})),Jr=function(){var e=Object(o.c)((function(e){return{trad:e.translations.values,courseTitle:e.openedXConverter.courseTitle,degreeOfCert:e.openedXConverter.degreeOfCert,displaySpinner:e.openedXConverter.displaySpinner,displayTarfileLink:e.openedXConverter.displayTarfileLink,displayErrorMessage:e.openedXConverter.displayErrorMessage}})),t=e.trad,a=e.courseTitle,l=e.degreeOfCert,c=e.displaySpinner,s=e.displayTarfileLink,i=e.displayErrorMessage,u=Object(o.b)(),m=function(e){u({type:oe,payload:e})},d=function(e){u({type:se,payload:e})},p=Object(n.useRef)(null),f=Kr();return r.a.createElement(ke.a,{container:!0},r.a.createElement(ke.a,{item:!0,xs:1}),r.a.createElement(ke.a,{item:!0,xs:10},r.a.createElement(Re.a,{color:"inherit",className:f.instruction,component:"div"},t.title_converter,r.a.createElement("ol",{className:f.list},r.a.createElement("li",null,t.converter_instruct_step_1),r.a.createElement("li",null,t.converter_instruct_step_2),r.a.createElement("li",null,t.converter_instruct_step_3)))),r.a.createElement(ke.a,{item:!0,xs:1}),r.a.createElement(ke.a,{item:!0,xs:1}),r.a.createElement(ke.a,{item:!0,xs:10,container:!0,className:f.dataArea},r.a.createElement(ke.a,{item:!0,xs:12,container:!0,direction:"column"},r.a.createElement(ke.a,{container:!0},r.a.createElement(ke.a,{item:!0,xs:6,className:f.col1},r.a.createElement("label",{htmlFor:"inputFile"},t.select_file_here)),r.a.createElement(ke.a,{item:!0,xs:6,className:f.col2},r.a.createElement("input",{type:"file",id:"inputFile",name:"inputFile",ref:p,className:f.button}))),r.a.createElement(ke.a,{container:!0},r.a.createElement(ke.a,{item:!0,xs:6,className:f.col1},r.a.createElement("label",{htmlFor:"courseTitle"},t.enter_course_name)),r.a.createElement(ke.a,{item:!0,xs:6,className:f.col2},r.a.createElement("input",{id:"courseTitle",value:a,label:"courseTitle",placeholder:"Course Title",onChange:function(e){return m(e.target.value)},className:f.input}))),r.a.createElement(ke.a,{container:!0},r.a.createElement(ke.a,{item:!0,xs:6,className:f.col1},r.a.createElement("label",{htmlFor:"degreeOfCert"},t.check_for_DoC)),r.a.createElement(ke.a,{item:!0,xs:6,className:f.col2},r.a.createElement("input",{id:"degreeOfCert",type:"checkbox",defaultChecked:l,onChange:function(){return d(!l)}}))))),r.a.createElement(ke.a,{item:!0,xs:1}),r.a.createElement(ke.a,{item:!0,xs:5}),r.a.createElement(ke.a,{item:!0,xs:2},r.a.createElement(Ae.a,{className:f.submit,onClick:function(){var e=p.current.files[0];e&&a?-1===e.name.indexOf(".xlsx")?alert(t.converter_alert_2):u(function(e,t,a){return function(){var n=Object(ot.a)(ct.a.mark((function n(r){var l,c,o,s,i,u,m;return ct.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:ue,payload:l={displaySpinner:!0}}),l={displayTarfileLink:!0,displayErrorMessage:!1},c=200,(o=new FormData).append("excelFile",a),o.append("courseTitle",t),o.append("degreeOfCert",e),s=window.props.endpoints.convertToTarfile,i={method:"POST",headers:{"X-CSRFToken":window.props.csrfToken},contentType:!1,processData:!1,body:o},n.next=12,fetch(s,i);case 12:return u=n.sent,c=u.status,m="init",n.prev=15,n.next=18,u.json();case 18:m=n.sent,n.next=23;break;case 21:n.prev=21,n.t0=n.catch(15);case 23:"init"!=m&&(l={displayTarfileLink:!1,displayErrorMessage:m.message}),r(200===c?{type:ie,payload:l}:{type:ie,payload:l={displayErrorMessage:"A server related error occured, please try again in a few minutes.",displayTarfileLink:!1}});case 26:case"end":return n.stop()}}),n,null,[[15,21]])})));return function(e){return n.apply(this,arguments)}}()}(l,a,e)):alert(t.converter_alert_1)},variant:"contained",color:"primary",component:"span"},t.start_convert)),r.a.createElement(ke.a,{item:!0,xs:5}),r.a.createElement(ke.a,{item:!0,xs:12,className:c?f.centered:f.hidden},r.a.createElement(Le.a,null)),r.a.createElement(ke.a,{className:!s&&f.hidden,container:!0},r.a.createElement(ke.a,{item:!0,xs:3}),r.a.createElement(ke.a,{item:!0,xs:6,className:f.centered},r.a.createElement("a",{className:f.download,href:"/media/microsite/nuclear-training-program/wul_dashboard/course.tar.gz",download:"course.tar.gz"},t.download_targz)),r.a.createElement(ke.a,{item:!0,xs:3})),r.a.createElement(ke.a,{className:!i&&f.hidden,container:!0},r.a.createElement(ke.a,{item:!0,xs:3}),r.a.createElement(ke.a,{item:!0,xs:6,className:f.centered},r.a.createElement("span",null,i)),r.a.createElement(ke.a,{item:!0,xs:3})))},Zr=Object(Ce.a)((function(){return{root:{backgroundColor:Se.palette.background.main,fontFamily:Se.text.font.main,paddingTop:20,paddingLeft:20,minHeight:"calc(100vh - 20px)","& .MuiTab-wrapper":{fontWeight:700}},tabs:{width:"calc(100% - 10px)"}}})),$r=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return{trad:e.translations.values,value:e.navigation.navValue}})),a=t.trad,l=t.value,c=Zr(),s=Object(n.useCallback)((function(t,a){e(jt(a))}),[e]),i=Object(n.useCallback)((function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Me,{value:l,index:0},r.a.createElement(Wa,null)),r.a.createElement(Me,{value:l,index:1},r.a.createElement(zr,null)),r.a.createElement(Me,{value:l,index:2},r.a.createElement(Jr,null)))}),[l]);return r.a.createElement(_e.a,{theme:Se},r.a.createElement(Xr.a,null),r.a.createElement(ke.a,{className:c.root},r.a.createElement(ke.a,{container:!0,className:c.tabs},r.a.createElement(ln,{value:l,handleChangeTab:s,tabsList:[a.quick_search,a.user_management,a.converter]})),i()))},Qr=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,el=Object(s.e)(xe,{},Qr(Object(s.a)(i.a)));c.a.render(r.a.createElement(o.a,{store:el},r.a.createElement($r,null)),document.getElementById("root"))}},[[224,1,2]]]);
//# sourceMappingURL=main.5c327ea3.chunk.js.map